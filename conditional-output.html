<!DOCTYPE html>
<html  lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
<script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-2728311-17", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");</script>
<meta name="Generator" content="Drupal 8 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="sites/default/files/favicon-64.png" type="image/png" />
<link rel="alternate" hreflang="en" href="conditional-output.html" />
<link rel="canonical" href="conditional-output.html" />
<link rel="shortlink" href="conditional-output.html" />
<link rel="revision" href="conditional-output.html" />

    <title>Conditional Output | Brightcove Learning</title>
    <link rel="stylesheet" media="all" href="sites/default/files/css/css_d7PoQ20hWbRiei75VgExP_tm8C1ylIRfzB3zIYLc5Cw_q23msc.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/@unicorn-fail/drupal-bootstrap-styles@0.0.2/dist/3.4.0/8.x-3.x/drupal-bootstrap.min.css" />


    
<!--[if lte IE 8]>
<script src="/sites/default/files/js/js_VtafjXmRvoUgAzqzYTA3Wrjkx9wcWhjP0G4ZnnqRamA.js"></script>
<![endif]-->

    <meta name="uri-translation" content="on" />
    <script>
window['_fs_debug'] = false; window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = 'BX3Q1';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
g.consent=function(a){g("consent",!arguments.length||a)};
g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
g.clearUserCookie=function(){};
})(window,document,window['_fs_namespace'],'script','user');
    </script>
  </head>
  <body class="path-node page-node-type-support-doc has-glyphicons">


<section id="block-gtranslate" class="block block-gtranslate block-gtranslate-block clearfix">
  
    

      



  </section>


  </div>

      </div>
      

                    <div class="navbar-collapse collapse">
            <div class="region region-navigation-collapsible">
    

  </div>

        </div>
          </header>
  
    <div class="full-width-headline">
    <div class="container">
      <div class="row">
        <div class="col-sm-12" role="heading">
            <div class="region region-header">
          <section id="block-brightcoveheadlineblock" class="block block-bc-general block-bc-general-headline-block clearfix">
  
    

      Documentation
  </section>


  </div>

        </div>
      </div>
    </div>
  </div>
  
      <div role="main" class="main-container container  js-quickedit-main-content">
    <div class="row">

                              <aside class="col-sm-3" role="complementary">
              <div class="region region-sidebar-first">
    <section class="bc-search-fixes-search-block-form block block-bc-search-fixes block-bc-search-fixes-search-block clearfix" data-drupal-selector="bc-search-fixes-search-block-form" id="block-brightcovesearchblock">
  
    

      <form action="conditional-output.html" method="post" id="bc-search-fixes-search-block-form" accept-charset="UTF-8">
  <div class="form-item js-form-item form-type-textfield js-form-type-textfield form-item-search js-form-item-search form-no-label form-group">
      <label for="edit-search" class="control-label sr-only">Search</label>
  
  
  <input data-drupal-selector="edit-search" class="form-text form-control" type="text" id="edit-search" name="search" value="" size="15" maxlength="128" placeholder="Search" />

  
  
  </div>
<input autocomplete="off" data-drupal-selector="form-yweli9w7c0i1daimvke44zma0babzvsnt4xjqvikaww" type="hidden" name="form_build_id" value="form-yWELi9W7c0i1daIMVKe44Zma0BABZvSNT4xJqVikaWw" /><input data-drupal-selector="edit-bc-search-fixes-search-block-form" type="hidden" name="form_id" value="bc_search_fixes_search_block_form" /><div data-drupal-selector="edit-actions" class="form-actions form-group js-form-wrapper form-wrapper" id="edit-actions"><button data-drupal-selector="edit-submit" class="button js-form-submit form-submit btn-primary btn icon-only" type="submit" id="edit-submit" name="op" value="Search"><span class="sr-only">Search</span><span class="icon glyphicon glyphicon-search" aria-hidden="true"></span></button></div>

</form>

  </section>

<section id="block-inpagenavigationblock" class="hidden-xs block block-bc-ipnav block-bc-ipnav-block clearfix">
  
      <h2 class="block-title">On This Page</h2>
    

      <div class="bc-ipnav-block"></div>
  </section>


  </div>

          </aside>
              
                  <section class="col-sm-9">

                                      <div class="highlighted">  <div class="region region-highlighted">
    <div data-drupal-messages-fallback class="hidden"></div>

  </div>
</div>
                  
                
                
                
                          <a id="main-content"></a>
            <div class="region region-content">
        <h1 class="page-header"><span>Conditional Output</span>
</h1>

  
<div class="node node--type-support-doc node--view-mode-full bcdocs-four-rows clearfix">

  

  <div class="group-first-row">
      </div>

  <div class="group-second-row">
  
  <div class="field field--name-field-products field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Product(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--product" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--product"></use>
        </svg>
              <div class="field--item">Video Cloud</div>
              </div>
      </div>

  <div class="field field--name-field-roles field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Role(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--roles" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--roles"></use>
        </svg>
              <div class="field--item">API Developer</div>
              </div>
      </div>

</div>

  
<div class="group-third-row taxonomy__tags">
      <svg class="icon--label" viewBox="0 0 100 100">
      <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--label"></use>
    </svg>
    
  <div class="field field--name-field-tasks field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Task(s)</div>
          <div class="field--items">
              <div class="field--item">Add Videos/Assets</div>
              </div>
      </div>

  <div class="field field--name-field-topics field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Topic(s)</div>
          <div class="field--items">
              <div class="field--item">Ingest Profiles</div>
              </div>
      </div>

  <div class="field field--name-field-apis field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">API(s)</div>
          <div class="field--items">
              <div class="field--item">Ingest Profiles API</div>
              </div>
      </div>

</div>

  <div class="group-fourth-row">
  
            <div class="field field--name-field-support-doc-body field--type-text-with-summary field--label-hidden field--item"><p>In this topic, you will learn how to create conditional outputs in a custom ingest profile by skipping renditions if the source file doesn't meet certain conditions.</p>
                <article class="bcls-article"><section class="bcls-section"><h2 id="Limitations">Limitations</h2>

<aside class="bcls-aside bcls-aside--information">Notes:
<ul><li class="language-editable">The conditional output settings described in this topic apply <strong>only</strong> to legacy ingest profiles, <strong>not</strong> to Dynamic Delivery or Context Aware Encoding profiles.</li>
	<li class="language-editable">To use conditional outputs with Dynamic Delivery ingestion/transcoding, <a href="contact-support.html">contact Brightcove Support</a>.</li>
</ul></aside></section><section class="bcls-section"><h2 id="why_skip_renditions">Why skip renditions?</h2>

<p>Skipping renditions is useful if the source videos you ingest vary widely in quality. This is often case, for example, for news organizations that use video captured by phones or other devices in the field.</p>

<p>Without conditional outputs, the Dynamic Ingest system will created exactly as many renditions as are specified in the profile.</p>

<p>For example, let's say you ingest a low-quality video (video bitrate around 820 kbps) using a profile that includes the following unconditional video renditions.</p>

<table class="bcls-table"><caption class="bcls-caption--table">Video Renditions</caption>
	<thead class="bcls-table__head"><tr><th>Format</th>
			<th>Audio Bitrate</th>
			<th>Video Bitrate</th>
		</tr></thead><tbody class="bcls-table__body"><tr><td style="text-align:center;">mp4</td>
			<td style="text-align:center;">64</td>
			<td style="text-align:center;">450</td>
		</tr><tr><td style="text-align:center;">mp4</td>
			<td style="text-align:center;">96</td>
			<td style="text-align:center;">900</td>
		</tr><tr><td style="text-align:center;">mp4</td>
			<td style="text-align:center;">128</td>
			<td style="text-align:center;">1700</td>
		</tr><tr><td style="text-align:center;">HLS</td>
			<td style="text-align:center;">64</td>
			<td style="text-align:center;">450</td>
		</tr><tr><td style="text-align:center;">HLS</td>
			<td style="text-align:center;">96</td>
			<td style="text-align:center;">700</td>
		</tr><tr><td style="text-align:center;">HLS</td>
			<td style="text-align:center;">96</td>
			<td style="text-align:center;">900</td>
		</tr><tr><td style="text-align:center;">HLS</td>
			<td style="text-align:center;">96</td>
			<td style="text-align:center;">1200</td>
		</tr><tr><td style="text-align:center;">HLS</td>
			<td style="text-align:center;">128</td>
			<td style="text-align:center;">1700</td>
		</tr><tr><td style="text-align:center;">HLS</td>
			<td style="text-align:center;">128</td>
			<td style="text-align:center;">2000</td>
		</tr></tbody></table><p>The resulting renditions in Studio would look something like this:</p>

<figure class="bcls-figure"><img class="bcls-image" alt="Renditions for Low Quality Video" src="https://learning-services-media.brightcove.com/doc-assets/video-cloud-apis/ingest-profiles-api/guides/conditional-outputs/renditions-for-low-quality.png" /><figcaption class="bcls-caption--image">Renditions for Low Quality Video</figcaption></figure><p>Note that the last three (highlighted) HLS renditions are identical in bitrate, and that the bitrate is only marginally higher than the next best HLS rendition. Also note that the difference in the bitrates for two best MP4 renditions is small. The reason for this is that transcoding can never improve on the bitrate of the source, and the source here had an average bitrate of around 800 kbps, so renditions with higher specified bitrates end up with something in that range (you'll see small differences because of different ways that average bitrate is calculated for segmented and non-segmented video formats).</p>
<!-- <p>You might also note that the renditions all have exactly the same dimensions. These are in fact the dimensions of the source, which are smaller than those for any of the renditions specified in the profile. Video Cloud will never upsize a video during transcoding, because this would result in significant degradation of the visual quality.</p> -->

<p>The last four renditions in the set, then, are essentially redundant, offering little if any improvement in quality over the "lower-quality" renditions, but they are created and stored anyway. This can be prevented by using conditional outputs that prevent a rendition from being generated if the source doesn't match the quality criteria you specify.</p>

<aside class="bcls-aside bcls-aside--information language-editable">Note that we have added conditional output settings to the <a href="standard-ingest-profiles-legacy-transcoding.html">Standard Profiles</a> and recommend that you use these profiles whenever possible.</aside></section><section class="bcls-section"><h2 id="Implementation">Implementation</h2>

<p>You can add a <code>skip</code> object to some of the renditions. The <code>skip</code> object contains one or more conditions, and if these conditions are not met, the rendition will not be created.</p>

<aside class="bcls-aside bcls-aside--information language-editable">Standard profiles will skip renditions automatically if the bitrate of the source video is lower than the specified bitrate for the rendition. If you want this behavior for custom profiles, you must add it in the way described in this topic.</aside></section><section class="bcls-section"><h2 id="Notes_on_usage">Notes on usage</h2>

<ol><li class="language-editable">An ingest profile <strong>must</strong> include at least one non-skippable rendition - if you try to create a profile in which all renditions are skippable, you will receive an error.</li>
	<li class="language-editable">You must insure that at least one rendition is created for every content type. For example:
	<ul><li class="language-editable">If you create both audio-only and video renditions, you must have a non-skippable rendition for each</li>
		<li class="language-editable">If you use DRM, you must have a non-skippable rendition for each format that works with that DRM type (Smooth, HLS, DASH, etc.)</li>
	</ul></li>
</ol></section><section class="bcls-section"><h2 id="syntax">Syntax</h2>

<p>The syntax for the <code>skip</code> object you can add to a rendition specification is as follows:</p>

<pre class="line-numbers">
        <code class="language-json">"skip": {
            "condition1": "value1",
            "condition2": 1300,
            ...etc
        }</code></pre>

<aside class="bcls-aside bcls-aside--information language-editable">Note that numerical values should <strong>not</strong> be enclosed in quotation marks. This does <strong>not</strong> apply to size values such as "640x360".</aside><h3>Example</h3>

<pre class="line-numbers">
        <code class="language-json">"renditions": [
            {
              "media_type": "video",
              "reference_id": "ts1",
              "format": "ts",
              "type": "segmented",
              "audio_codec": "aac",
              "audio_bitrate": 96,
              "video_bitrate": 1200.
              "video_codec": "h264",
              "keyframe_rate": 0.5,
              "max_frame_rate": 30,
              "width": 1280,
              "height": 720,
              "h264_profile": "main",
              "skip": {
                  "min_video_bitrate": 1000,
                  "min_size": "640x360"
                }
            },
            ... etc
        ]</code></pre>

<p>For the profile (fragment) above, the rendition shown will be created <strong>only</strong> if the source video has a video bitrate of at least 1000 kbps and a frame size of at least 640px x 360px.</p>

<aside class="bcls-aside bcls-aside--warning language-editable">An ingest profile <strong>must</strong> include at least one non-skippable rendition. If you try to create a profile in which every rendition contains a <code>skip</code> object, the Ingest Profiles API will return an error.</aside></section><section class="bcls-section"><h2 id="skip_fields">Skip fields</h2>

<p>Below are the fields (conditions) that can be used in the <code>skip</code> object:</p>

<table class="bcls-table"><caption class="bcls-caption--table">Skip Fields</caption>
	<thead class="bcls-table__head"><tr><th>property</th>
			<th>type</th>
			<th>description</th>
			<th>default</th>
		</tr></thead><tbody class="bcls-table__body"><tr><td class="language-editable"><code>min_audio_bitrate</code></td>
			<td class="language-editable">integer</td>
			<td class="language-editable">the minimum audio bitrate that the source must have (kbps)</td>
			<td class="language-editable">null</td>
		</tr><tr><td class="language-editable"><code>max_audio_bitrate</code></td>
			<td class="language-editable">integer</td>
			<td class="language-editable">the maximum audio bitrate that the source must have (kbps)</td>
			<td class="language-editable">null</td>
		</tr><tr><td class="language-editable"><code>min_video_bitrate</code></td>
			<td class="language-editable">integer</td>
			<td class="language-editable">the minimum video bitrate that the source must have (kbps)</td>
			<td class="language-editable">null</td>
		</tr><tr><td class="language-editable"><code>max_video_bitrate</code></td>
			<td class="language-editable">integer</td>
			<td class="language-editable">the maximum video bitrate that the source must have (kbps)</td>
			<td class="language-editable">null</td>
		</tr><tr><td class="language-editable"><code>require_audio</code></td>
			<td class="language-editable">boolean</td>
			<td class="language-editable">the source must include an audio track</td>
			<td class="language-editable">null</td>
		</tr><tr><td class="language-editable"><code>require_video</code></td>
			<td class="language-editable">boolean</td>
			<td class="language-editable">the source must include a video track</td>
			<td class="language-editable">null</td>
		</tr><tr><td class="language-editable"><code>min_size</code></td>
			<td class="language-editable">string of the form "widthxheight" (e.g. <code>"400x225"</code>)</td>
			<td class="language-editable">the source must be at least this resolution</td>
			<td class="language-editable">null</td>
		</tr><tr><td class="language-editable"><code>max_size</code></td>
			<td class="language-editable">string of the form "widthxheight" (e.g. <code>"1920x1080"</code>)</td>
			<td class="language-editable">the source must be at most this resolution</td>
			<td class="language-editable">null</td>
		</tr></tbody></table></section></article></div>
      
</div>

</div>


<section class="views-element-container block block-views block-views-blockrelated-content-by-field-block-1 clearfix" id="block-views-block-related-content-by-field-block-1">
  
    

      <div class="form-group"><div class="view view-related-content-by-field view-id-related_content_by_field view-display-id-block_1 js-view-dom-id-a144293a1917a9c18cafc23c5bbd27907d2affe53b4c31671e9cb70fa1590339">
  
    
      <div class="view-header">
      <h2>Related content</h2>
    </div>
      
      <div class="view-content">
      <div class="item-list">
  
  <ul>

          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="overview-dynamic-ingest-api-legacy-ingest.html" hreflang="en"> Overview: Dynamic Ingest API (Legacy Ingest)</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="quick-start-dynamic-ingest-api-legacy-ingest.html" hreflang="en"> Quick Start: Dynamic Ingest API (Legacy Ingest)</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="overview-dynamic-ingest-api-dynamic-delivery.html" hreflang="en"> Overview: Dynamic Ingest API for Dynamic Delivery</a></span></span></div></li>
    
  </ul>

</div>

    </div>
  
          </div>
</div>

  </section>


  </div>

              </section>

                </div>
  </div>

      
  
  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"node\/18040","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","google_analytics":{"trackOutbound":true,"trackMailto":true,"trackDownload":true,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"},"bootstrap":{"forms_has_error_value_toggle":1,"modal_animation":1,"modal_backdrop":"true","modal_focus_input":1,"modal_keyboard":1,"modal_select_text":1,"modal_show":1,"modal_size":"","popover_enabled":1,"popover_animation":1,"popover_auto_close":1,"popover_container":"body","popover_content":"","popover_delay":"0","popover_html":0,"popover_placement":"right","popover_selector":"","popover_title":"","popover_trigger":"click"},"ajaxTrustedUrl":{"form_action_p_pvdeGsVG5zNF_XLGPTvYSKCf43t8qZYSwcfZl2uzM":true},"user":{"uid":0,"permissionsHash":"3b7fdb4927baca3ee2939edeb777485b3e2c2d36cf8c80e0d8f49c6dc5e2eeca"}}</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

  <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"e78a80aa93","applicationID":"129613202","transactionName":"YwBUZkcFVktUWhJQX1pKd1FBDVdWGn0UTEBVCWpxWhZdZHNWFFRscgpEX3cRUVRRXBQUDkYAWFZQFmhUVFoDUV9YAVNAcwtKVXRaElBfWg==","queueTime":0,"applicationTime":205,"atts":"T0dXEA8fRUU=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>
