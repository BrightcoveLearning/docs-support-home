<!DOCTYPE html>
<html  lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
<script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-2728311-17", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");</script>
<meta name="Generator" content="Drupal 8 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="sites/default/files/favicon-64.png" type="image/png" />
<link rel="alternate" hreflang="en" href="using-cms-api-managing-clips.html" />
<link rel="canonical" href="using-cms-api-managing-clips.html" />
<link rel="shortlink" href="using-cms-api-managing-clips.html" />
<link rel="revision" href="using-cms-api-managing-clips.html" />

    <title>Using the CMS API: Managing Clips | Brightcove Learning</title>
    <link rel="stylesheet" media="all" href="sites/default/files/css/css_d7PoQ20hWbRiei75VgExP_tm8C1ylIRfzB3zIYLc5Cw_q23msc.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/@unicorn-fail/drupal-bootstrap-styles@0.0.2/dist/3.4.0/8.x-3.x/drupal-bootstrap.min.css" />


    
<!--[if lte IE 8]>
<script src="/sites/default/files/js/js_VtafjXmRvoUgAzqzYTA3Wrjkx9wcWhjP0G4ZnnqRamA.js"></script>
<![endif]-->

    <meta name="uri-translation" content="on" />
    <script>
window['_fs_debug'] = false; window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = 'BX3Q1';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
g.consent=function(a){g("consent",!arguments.length||a)};
g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
g.clearUserCookie=function(){};
})(window,document,window['_fs_namespace'],'script','user');
    </script>
  </head>
  <body class="path-node page-node-type-support-doc has-glyphicons">


<section id="block-gtranslate" class="block block-gtranslate block-gtranslate-block clearfix">
  
    

      



  </section>


  </div>

      </div>
      

                    <div class="navbar-collapse collapse">
            <div class="region region-navigation-collapsible">
    

  </div>

        </div>
          </header>
  
    <div class="full-width-headline">
    <div class="container">
      <div class="row">
        <div class="col-sm-12" role="heading">
            <div class="region region-header">
          <section id="block-brightcoveheadlineblock" class="block block-bc-general block-bc-general-headline-block clearfix">
  
    

      Documentation
  </section>


  </div>

        </div>
      </div>
    </div>
  </div>
  
      <div role="main" class="main-container container  js-quickedit-main-content">
    <div class="row">

                              <aside class="col-sm-3" role="complementary">
              <div class="region region-sidebar-first">
    <section class="bc-search-fixes-search-block-form block block-bc-search-fixes block-bc-search-fixes-search-block clearfix" data-drupal-selector="bc-search-fixes-search-block-form" id="block-brightcovesearchblock">
  
    

      <form action="using-cms-api-managing-clips.html" method="post" id="bc-search-fixes-search-block-form" accept-charset="UTF-8">
  <div class="form-item js-form-item form-type-textfield js-form-type-textfield form-item-search js-form-item-search form-no-label form-group">
      <label for="edit-search" class="control-label sr-only">Search</label>
  
  
  <input data-drupal-selector="edit-search" class="form-text form-control" type="text" id="edit-search" name="search" value="" size="15" maxlength="128" placeholder="Search" />

  
  
  </div>
<input autocomplete="off" data-drupal-selector="form-rxjcfc64ki3tw20zqzg31eryshokiit1vcfvlmkrp00" type="hidden" name="form_build_id" value="form-RxjCfc64kI3Tw20ZQzg31eRYShokiit1VcfvLmkRp00" /><input data-drupal-selector="edit-bc-search-fixes-search-block-form" type="hidden" name="form_id" value="bc_search_fixes_search_block_form" /><div data-drupal-selector="edit-actions" class="form-actions form-group js-form-wrapper form-wrapper" id="edit-actions"><button data-drupal-selector="edit-submit" class="button js-form-submit form-submit btn-primary btn icon-only" type="submit" id="edit-submit" name="op" value="Search"><span class="sr-only">Search</span><span class="icon glyphicon glyphicon-search" aria-hidden="true"></span></button></div>

</form>

  </section>

<section id="block-inpagenavigationblock" class="hidden-xs block block-bc-ipnav block-bc-ipnav-block clearfix">
  
      <h2 class="block-title">On This Page</h2>
    

      <div class="bc-ipnav-block"></div>
  </section>


  </div>

          </aside>
              
                  <section class="col-sm-9">

                                      <div class="highlighted">  <div class="region region-highlighted">
    <div data-drupal-messages-fallback class="hidden"></div>

  </div>
</div>
                  
                
                
                
                          <a id="main-content"></a>
            <div class="region region-content">
        <h1 class="page-header"><span>Using the CMS API: Managing Clips</span>
</h1>

  
<div class="node node--type-support-doc node--view-mode-full bcdocs-four-rows clearfix">

  

  <div class="group-first-row">
      </div>

  <div class="group-second-row">
  
  <div class="field field--name-field-products field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Product(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--product" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--product"></use>
        </svg>
              <div class="field--item">Video Cloud</div>
              </div>
      </div>

  <div class="field field--name-field-roles field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Role(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--roles" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--roles"></use>
        </svg>
              <div class="field--item">API Developer</div>
              </div>
      </div>

</div>

  
<div class="group-third-row taxonomy__tags">
      <svg class="icon--label" viewBox="0 0 100 100">
      <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--label"></use>
    </svg>
    
  <div class="field field--name-field-tasks field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Task(s)</div>
          <div class="field--items">
              <div class="field--item">Manage Videos</div>
          <div class="field--item">Share Using Brightcove Social</div>
              </div>
      </div>

  <div class="field field--name-field-topics field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Topic(s)</div>
          <div class="field--items">
              <div class="field--item">Live Streaming</div>
          <div class="field--item">Social Sharing</div>
              </div>
      </div>

  <div class="field field--name-field-apis field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">API(s)</div>
          <div class="field--items">
              <div class="field--item">CMS API</div>
              </div>
      </div>

</div>

  <div class="group-fourth-row">
  
            <div class="field field--name-field-support-doc-body field--type-text-with-summary field--label-hidden field--item"><p>In this topic, you will learn how to manage video clips using the CMS API.</p>
                <p>Clips are videos created from segments of other videos generated by <a href="creating-video-clip-using-brightcove-social.html">Brightcove Social</a> and other tools. If the clips are created for sharing via Brightcove Social, you may wish to remove their renditions to reduce your managed storage and/or disable them to prevent them from showing up in your video workflows.</p>

<article class="bcls-article"><section id="findingClips" class="bcls-section"><h2>Finding clips</h2>

<p>There are special search terms for the CMS API to help you locate clips in your account:</p>

<ul><li><code>q=%2Bis_clip:true</code> - returns only clips</li>
	<li><code>q=%2Dis_clip:true</code> - returns only non-clips</li>
	<li><code>q=%2Bis_clip:false</code> - returns only non-clips (functionally identical to the previous item)</li>
	<li><code>q=%2Bclip_source_video_id: <span class="bcls-input">video_id</span> </code> - returns clips generated from the specified video</li>
</ul><aside class="bcls-aside bcls-aside--information">Notes:
<ul><li><code>%2B</code> is a URI-encoded <code>+</code> sign</li>
	<li><code>%2D</code> is a URI-encoded <code>-</code> sign</li>
	<li>Remember that <code>limit</code> and <code>offset</code> apply: by default, CMS API queries return 10 videos (maximum: limit=100), so if there are many clips in the account, you will need to make multiple requests with appropriate <code>limit</code> and <code>offset</code> parameters to find them all. You can get a count of all clips by sending a GET request to the CMS API counts endpoint: <code>.../accounts/account_id/ <span class="bcls-highlight">counts</span>/videos/ <span class="bcls-highlight">q=%2Bis_clip:true</span> </code></li>
</ul></aside><h3>Sample</h3>

<h4>Request</h4>

<pre class="line-numbers">
<code class="language-http">https://cms.api.brightcove.com/v1/accounts/57838016001/videos?<span class="bcls-highlight">q=%2Bis_clip:true</span></code></pre>

<h4>Response</h4>

<pre class="line-numbers">
<code class="language-json">[
  {
    "id": "5235328819001",
    "account_id": "57838016001",
    "ad_keys": null,
    <span class="bcls-highlight">"clip_source_video_id": "4752143002001",</span>
    "complete": true,
    "created_at": "2016-12-04T17:06:20.562Z",
    "cue_points": [],
    "custom_fields": {
      "subject": "Birds"
    },
    "delivery_type": "static_origin",
    "description": null,
    "digital_master_id": "5235339325001",
    "duration": 24042,
    "economics": "AD_SUPPORTED",
    "folder_id": null,
    "geo": null,
    "has_digital_master": true,
    "images": {
      "thumbnail": {
        "asset_id": "5235341448001",
        "remote": false,
        "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/2025/57838016001_5235341448001_5235328819001-th.jpg?pubId=57838016001&amp;videoId=5235328819001",
        "sources": [
          {
            "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/2025/57838016001_5235341448001_5235328819001-th.jpg?pubId=57838016001&amp;videoId=5235328819001",
            "height": 90,
            "width": 160
          },
          {
            "src": "https://brightcove.hs.llnwd.net/v2/unsecured/media/57838016001/201612/2025/57838016001_5235341448001_5235328819001-th.jpg?pubId=57838016001&amp;videoId=5235328819001",
            "height": 90,
            "width": 160
          }
        ]
      },
      "poster": {
        "asset_id": "5235339121001",
        "remote": false,
        "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/2025/57838016001_5235339121001_5235328819001-vs.jpg?pubId=57838016001&amp;videoId=5235328819001",
        "sources": [
          {
            "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/2025/57838016001_5235339121001_5235328819001-vs.jpg?pubId=57838016001&amp;videoId=5235328819001",
            "height": 360,
            "width": 640
          },
          {
            "src": "https://brightcove.hs.llnwd.net/v2/unsecured/media/57838016001/201612/2025/57838016001_5235339121001_5235328819001-vs.jpg?pubId=57838016001&amp;videoId=5235328819001",
            "height": 360,
            "width": 640
          }
        ]
      }
    },
    "link": null,
    "long_description": null,
    "name": "greatblueheron.mp4 - Clip-2016-12-04",
    "original_filename": "2efadac9-8e36-423c-b988-afcf2cd23c49.mov",
    "projection": null,
    "published_at": "2016-12-04T17:06:20.562Z",
    "reference_id": null,
    "schedule": null,
    "sharing": null,
    "state": "ACTIVE",
    "tags": [
      "newtag"
    ],
    "text_tracks": [],
    "updated_at": "2016-12-04T17:08:41.944Z"
  },
  {
    "id": "5235312567001",
    "account_id": "57838016001",
    "ad_keys": null,
    <span class="bcls-highlight">"clip_source_video_id": "5220368996001",</span>
    "complete": true,
    "created_at": "2016-12-04T17:07:58.450Z",
    "cue_points": [],
    "custom_fields": {
      "subject": "Birds"
    },
    "delivery_type": "static_origin",
    "description": "Mother and child owls...",
    "digital_master_id": "5235341452001",
    "duration": 39253,
    "economics": "AD_SUPPORTED",
    "folder_id": null,
    "geo": null,
    "has_digital_master": true,
    "images": {
      "thumbnail": {
        "asset_id": "5235339124001",
        "remote": false,
        "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/1897/57838016001_5235339124001_5235312567001-th.jpg?pubId=57838016001&amp;videoId=5235312567001",
        "sources": [
          {
            "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/1897/57838016001_5235339124001_5235312567001-th.jpg?pubId=57838016001&amp;videoId=5235312567001",
            "height": 90,
            "width": 160
          },
          {
            "src": "https://brightcove.hs.llnwd.net/v2/unsecured/media/57838016001/201612/1897/57838016001_5235339124001_5235312567001-th.jpg?pubId=57838016001&amp;videoId=5235312567001",
            "height": 90,
            "width": 160
          }
        ]
      },
      "poster": {
        "asset_id": "5235341824001",
        "remote": false,
        "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/1897/57838016001_5235341824001_5235312567001-vs.jpg?pubId=57838016001&amp;videoId=5235312567001",
        "sources": [
          {
            "src": "http://brightcove.vo.llnwd.net/v1/unsecured/media/57838016001/201612/1897/57838016001_5235341824001_5235312567001-vs.jpg?pubId=57838016001&amp;videoId=5235312567001",
            "height": 540,
            "width": 960
          },
          {
            "src": "https://brightcove.hs.llnwd.net/v2/unsecured/media/57838016001/201612/1897/57838016001_5235341824001_5235312567001-vs.jpg?pubId=57838016001&amp;videoId=5235312567001",
            "height": 540,
            "width": 960
          }
        ]
      }
    },
    "link": null,
    "long_description": null,
    "name": "Great Horned Owl - Clip-2016-12-04",
    "original_filename": "c0640095-e696-41ea-8e7e-2ebf4d090d69.mov",
    "projection": null,
    "published_at": "2016-12-04T17:07:58.450Z",
    "reference_id": null,
    "schedule": null,
    "sharing": null,
    "state": "ACTIVE",
    "tags": [
      "bird",
      "nature",
      "air"
    ],
    "text_tracks": [],
    "updated_at": "2016-12-04T17:09:16.967Z"
  }
]</code></pre>
</section><section id="removingAssets" class="bcls-section"><h2>Removing Assets</h2>

<p>If you are not going to use your clips for any other purpose than sharing the to social media sites, you may wish to reduce your managed storage by removing assets from them. In terms of storage, the renditions make the most difference, but you can remove posters and thumbnails as well, if you wish (this would also help to identify the clips in Studio as not being videos for general use).</p>

<aside class="bcls-aside bcls-aside--warning">You do <strong>not</strong> want to delete the clip itself, because if you do, you will no longer be able to get social analytics for it. You will also <strong>not</strong> get social analytics if you deactivate the clip or schedule it for a future date.</aside><p>To remove assets, you will use <a href="https://docs.brightcove.com/cms-api/v1/doc/index.html#api-assetGroup">the asset endpoints of the CMS API</a>. The logic is simple: first GET the assets to retrieve their ids in the Video Cloud system, and then DELETE them:</p>

<figure class="bcls-figure"><img class="bcls-image" alt="Logic for Removing Rendtions" src="https://learning-services-media.brightcove.com/doc-assets/video-cloud-apis/cms-api/guides/clips/clips.svg" /><figcaption class="bcls-caption--image">Logic for Removing Renditions</figcaption></figure><p>Usually there will be only a single poster and thumbnail to delete, but there will generally be multiple renditions, so if you are going to do this programmatically, you will need to loop over the array of objects returned by the GET renditions request and delete the renditions one by one. Below are the relevant API endpoints and some sample code (JavaScript + a proxy written in PHP to make the API requests) to perform the tasks of removing the assets.</p>
</section><section id="assetEndpoints" class="bcls-section"><h2>Asset endpoints</h2>

<p>Here are the relevant asset endpoints you will need to remove assets. For all these endpoints, the base URL is:</p>

<pre class="line-numbers">
<code class="language-http">https://cms.api.brightcove.com/v1/accounts</code></pre>

<h3>Renditions</h3>

<h4>GET renditions</h4>

<pre class="line-numbers">
<code class="language-http">/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/assets/renditions</code></pre>

<h4>DELETE a rendition</h4>

<pre class="line-numbers">
<code class="language-http">/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/assets/renditions/<span class="bcls-input">rendition_id</span></code></pre>

<h3>Posters</h3>

<h4>GET posters</h4>

<pre class="line-numbers">
<code class="language-http">/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/assets/poster</code></pre>

<h4>DELETE a poster</h4>

<pre class="line-numbers">
<code class="language-http">/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/assets/poster/<span class="bcls-input">poster_id</span></code></pre>

<h3>Thumbnails</h3>

<h4>GET thumbnails</h4>

<pre class="line-numbers">
<code class="language-http">/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/assets/thumbnail</code></pre>

<h4>DELETE a thumbnail</h4>

<pre class="line-numbers">
<code class="language-http">/<span class="bcls-input">account_id</span>/videos/<span class="bcls-input">video_id</span>/assets/thumbnail/<span class="bcls-input">thumbnail_id</span></code></pre>
</section><section id="sampleCode" class="bcls-section"><h2>Sample app</h2>

<p>Below is sample code for an app that finds all the clips in an account and then removes all renditions, as well as the poster and thumbnail for each clip.</p>

<h3>HTML</h3>

<pre class="line-numbers">
<code class="language-html">&lt;fieldset&gt;
    &lt;legend&gt;Inputs&lt;/legend&gt;
    &lt;p&gt;Account id: &lt;input type="text" name="account_id" id="account_id" value=""&gt;&lt;/p&gt;
    &lt;p&gt;Client id: &lt;input type="text" name="client_id" id="client_id" value=""&gt;&lt;/p&gt;
    &lt;p&gt;Client secret: &lt;input type="text" name="client_secret" id="client_secret" value=""&gt;&lt;/p&gt;
    &lt;p&gt;&lt;button id="goBtn"&gt;Remove all clip assets&lt;/button&gt;&lt;/p&gt;
&lt;/fieldset&gt;
&lt;h2&gt;Results&lt;/h2&gt;
&lt;pre id="status"&gt;&lt;/pre&gt;</code></pre>

<h3>JavaScript</h3>

<pre class="line-numbers">
<code class="language-javascript">var BCLS = (function (window, document) {
  /**
   * this scripts assumes that HTML elements with ids shown
   * in the following assignments exist in the page that
   * calls this script.
   * Alternatively, store the client_id and client_secret
   * in the proxy (NOT in a client-side script!)
   * and the account_id value here
   */
  var account_id      = document.getElementById('account_id'),
      client_id       = document.getElementById('client_id'),
      client_secret   = document.getElementById('client_secret'),
      status          = document.getElementById('status'),
      goBtn           = document.getElementById('goBtn'),
      videoCount      = 0,
      videoNumber     = 0,
      totalCalls      = 0,
      callNumber      = 0,
      renditionNumber = 0,
      videoData       = [],
      renditionData   = [],
      posterData      = {},
      thumbnailData   = {};

  /**
   * sets up all API requests and handles the responses
   * @param {String} type the request type
   */
  function setUpRequest(type) {
      var baseURL = 'https://cms.api.brightcove.com/v1/accounts',
          endpoint,
          responseDecoded,
          // recommended limit value for best performance with CMS API
          limit   = 25,
          options = {};
      options.client_id = (client_id.value) ? client_id.value : null;
      options.client_secret = (client_secret.value) ? client_secret.value : null;

      switch (type) {
          // get a count of clips
          case 'getCount':
              endpoint = '/' + account_id.value + '/counts/videos?q=%2Bis_clip:true';
              options.url = baseURL + endpoint;
              options.requestType = 'GET';
              makeRequest(options, function(response) {
                  if (response) {
                      responseDecoded = JSON.parse(response);
                      videoCount = parseInt(responseDecoded.count);
                      // calculate total calls needed to get the video clips
                      totalCalls = Math.ceil(videoCount / limit);
                      setUpRequest('getVideoClips');
                  }
              });
              break;
          // retrieve the clips
          case 'getVideoClips':
              endpoint = '/' + account_id.value + '/videos?q=%2Bis_clip:true&amp;limit=' + limit + '&amp;offset=' + (limit * callNumber);
              options.url = baseURL + endpoint;
              options.requestType = 'GET';
              makeRequest(options, function(response) {
                  if (response) {
                      responseDecoded = JSON.parse(response);
                      // add new clips to videoData array
                      videoData.push.apply(videoData, responseDecoded);
                  }
                  // increment the call number
                  callNumber++;
                  // are we done?
                  if (callNumber &lt; totalCalls) {
                      // get the next batch
                      setUpRequest('getVideoClips');
                  } else {
                      // got all the clips
                      // update status
                      status.textContent =+ videoData.length + ' video clips found \n';
                      // reset the callNumber
                      callNumber = 0;
                      setUpRequest('getRenditions');
                  }
              });
              break;
          case 'getRenditions':
              endpoint = '/' + account_id.value + '/videos/' + videoData[videoNumber].id + '/assets/renditions';
              options.url = baseURL + endpoint;
              options.requestType = 'GET';
              // update status
              status.textContent =+ 'fetching renditions for clip ' + videoData[callNumber].name + ' \n';
              makeRequest(options, function(response) {
                if (response) {
                    responseDecoded = JSON.parse(response);
                    renditionData = responseDecoded;
                    // update status
                    status.textContent =+ renditionData.length + ' renditions found for clip ' + videoData[callNumber].name + ' \n';
                    if (renditionData.length &gt; 0) {
                        setUpRequest('deleteRendition');
                    } else {
                        setUpRequest('getPoster');
                    }
                } else {
                    // no renditions
                    status.textContent =+ 'no renditions found for clip number ' + videoData[callNumber].name + ' \n';
                    setUpRequest('getPoster');
                }
              });
              break;
          case 'deleteRendition':
              endpoint = '/' + account_id.value + '/videos/' + videoData[videoNumber].id + '/assets/renditions/' + renditionData[renditionNumber].id;
              options.url = baseURL + endpoint;
              options.requestType = 'DELETE';
              makeRequest(options, function(response) {
                // there should be no response unless there was an error
                if (response) {
                    status.textContent += 'Delete rendition response: ' + response + ' \n';
                    // keep going anyway
                    renditionNumber++;
                    if (renditionNumber &lt; renditionData.length) {
                        setUpRequest('deleteRendition');
                    } else {
                        // done with renditions, do poster
                        setUpRequest('getPoster');
                    }
                } else {
                    status.textContent += 'Rendition deleted for ' + videoData[callNumber].name + '\n';
                    renditionNumber++;
                    // check to see if there are more renditions
                    if (renditionNumber &lt; renditionData.length) {
                        setUpRequest('deleteRendition');
                    } else {
                        // do the poster
                        setUpRequest('getPoster');
                    }
                }
              });
              break;
          case 'getPoster':
              endpoint = '/' + account_id.value + '/videos/' + videoData[videoNumber].id + '/assets/poster';
              options.url = baseURL + endpoint;
              options.requestType = 'GET';
              makeRequest(options, function(response) {
                if (response) {
                    posterData = JSON.parse(response);
                    setUpRequest('deletePoster');
                } else {
                    // no poster, do the thumbail
                    setUpRequest('getThumbnail');
                }
              });
              break;
          case 'deletePoster':
              endpoint = '/' + account_id.value + '/videos/' + videoData[videoNumber].id + '/assets/poster/' + posterData.id;
              options.url = baseURL + endpoint;
              options.requestType = 'DELETE';
              makeRequest(options, function(response) {
                // no response unless something went wront
                if (response) {
                    status.textContent += 'Delete poster response: ' + response + ' \n';
                    // try thumbnail anyway
                    setUpRequest('getThumbnail');
                } else {
                    // success; do thumbnail
                    status.textContent += 'Poster deleted for ' + videoData[callNumber].name + ' \n';
                    setUpRequest('getThumbnail');
                }
               });
              break;
          case 'getThumbnail':
              endpoint = '/' + account_id.value + '/videos/' + videoData[callNumber].id + '/assets/thumbnail';
              options.url = baseURL + endpoint;
              options.requestType = 'GET';
              makeRequest('options', function(response) {
                if (response) {
                    thumbnailData = JSON.parse(response);
                    setUpRequest('deleteThumbnail');
                } else {
                    // if no thumbnail, go on
                    videoNumber++;
                    if (videoNumber &lt; videoCount) {
                        setUpRequest('getRenditions');
                    } else {
                        // done
                        status.textContent += 'Finished!';
                    }
                }
              });
              break;
          case 'deleteThumbnail':
              endpoint = '/' + account_id.value + '/videos/' + videoData[videoNumber].id + '/assets/thumbnail/' + thumbnailData.id;
              options.url = baseURL + endpoint;
              options.requestType = 'DELETE';
              makeRequest(options, function(response) {
                // no response unless something went wrong
                if (response) {
                    status.textContent += 'Delete thumbnail response: ' + response + ' \n';
                    // do next video anyway if any
                    videoNumber++;
                    if (videoNumber &lt; videoCount) {
                        setUpRequest('getRenditions');
                    } else {
                        // done
                        status.textContent += 'Finished!';
                    }
                } else {
                    // success
                    status.textContent += 'Thumbnail deleted for ' + videoData[callNumber].name + ' \n';
                    // do next video if any
                    videoNumber++;
                    if (videoNumber &lt; videoCount) {
                        setUpRequest('getRenditions');
                    } else {
                        // done
                        status.textContent += 'Finished!';
                    }
                }
              });
              break;
          default:
            if (console) {
                console.log('default case: we should not be here');
            }
      }
  }

  /**
   * send API request to the proxy
   * @param  {Object} requestData options for the request
   * @param  {Function} [callback] callback function
   */
  function makeRequest(options, callback) {
    var httpRequest = new XMLHttpRequest(),
      response,
      requestParams,
      dataString,
      proxyURL = 'https://solutions.brightcove.com/bcls/bcls-proxy/clips-proxy.php',
      // response handler
      getResponse = function() {
        try {
          if (httpRequest.readyState === 4) {
              if (httpRequest.status &gt;= 200 &amp;&amp; httpRequest.status &lt; 300) {
                response = httpRequest.responseText;
                console.log('raw response', response);
                // some API requests return '{null}' for empty responses - breaks JSON.parse
                if (response === '{null}') {
                  response = null;
                }
                // return the response
                callback(response);
              } else {
                alert('There was a problem with the request. Request returned ' + httpRequest.status);
              }
            }
          } catch (e) {
            alert('Caught Exception: ' + e);
          }
        };
  /**
   * set up request data
   * the proxy used here takes the following request body:
   * JSON.stringify(options)
   */
  // set response handler
  httpRequest.onreadystatechange = getResponse;
  // open the request
  httpRequest.open('POST', proxyURL);
  // set headers if there is a set header line, remove it
  // open and send request
  httpRequest.send(JSON.stringify(options));
}</code></pre>

<h3>Proxy</h3>

<aside class="bcls-aside bcls-aside--information">In order to build your own version the sample app on this page, you must create and host your own proxy. (The proxies used by Brightcove Learning Services only accept requests from Brightcove domains.) You can download two versions of our proxy code:
<ul><li><a href="https://learning-services-media.brightcove.com/doc-assets/proxy/bcls-proxy-for-distribution.php.zip">This is a general version that expects client credentials to be passed with the request</a></li>
	<li><a href="https://learning-services-media.brightcove.com/doc-assets/proxy/doc-samples-proxy.php.zip">This version allows you to save your client credentials in the proxy itself on lines 25-26 (recommended)</a></li>
</ul></aside></section></article></div>
      
</div>

</div>


<section class="views-element-container block block-views block-views-blockrelated-content-by-field-block-1 clearfix" id="block-views-block-related-content-by-field-block-1">
  
    

      <div class="form-group"><div class="view view-related-content-by-field view-id-related_content_by_field view-display-id-block_1 js-view-dom-id-ded4731cea41eca8a9e4bee22da2ccb5fb929e61528ec03f8b8692908bd8431a">
  
    
      <div class="view-header">
      <h2>Related content</h2>
    </div>
      
      <div class="view-content">
      <div class="item-list">
  
  <ul>

          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="creating-video-clip-using-brightcove-social.html" hreflang="en">Creating a Video Clip Using Brightcove Social</a></span></span></div></li>
    
  </ul>

</div>

    </div>
  
          </div>
</div>

  </section>


  </div>

              </section>

                </div>
  </div>

      
  
  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"node\/18006","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","google_analytics":{"trackOutbound":true,"trackMailto":true,"trackDownload":true,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"},"bootstrap":{"forms_has_error_value_toggle":1,"modal_animation":1,"modal_backdrop":"true","modal_focus_input":1,"modal_keyboard":1,"modal_select_text":1,"modal_show":1,"modal_size":"","popover_enabled":1,"popover_animation":1,"popover_auto_close":1,"popover_container":"body","popover_content":"","popover_delay":"0","popover_html":0,"popover_placement":"right","popover_selector":"","popover_title":"","popover_trigger":"click"},"ajaxTrustedUrl":{"form_action_p_pvdeGsVG5zNF_XLGPTvYSKCf43t8qZYSwcfZl2uzM":true},"user":{"uid":0,"permissionsHash":"3b7fdb4927baca3ee2939edeb777485b3e2c2d36cf8c80e0d8f49c6dc5e2eeca"}}</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

  <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"e78a80aa93","applicationID":"129613202","transactionName":"YwBUZkcFVktUWhJQX1pKd1FBDVdWGkkHXlVrBldRXQE=","queueTime":0,"applicationTime":15,"atts":"T0dXEA8fRUU=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>
