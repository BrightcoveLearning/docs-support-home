<!DOCTYPE html>
<html  lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
<script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-2728311-17", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");</script>
<meta name="Generator" content="Drupal 8 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="sites/default/files/favicon-64.png" type="image/png" />
<link rel="alternate" hreflang="en" href="live-stream-configuration.html" />
<link rel="canonical" href="live-stream-configuration.html" />
<link rel="shortlink" href="live-stream-configuration.html" />
<link rel="revision" href="live-stream-configuration.html" />

    <title>Live Stream Configuration | Brightcove Learning</title>
    <link rel="stylesheet" media="all" href="sites/default/files/css/css_d7PoQ20hWbRiei75VgExP_tm8C1ylIRfzB3zIYLc5Cw_q23msc.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/@unicorn-fail/drupal-bootstrap-styles@0.0.2/dist/3.4.0/8.x-3.x/drupal-bootstrap.min.css" />


    
<!--[if lte IE 8]>
<script src="/sites/default/files/js/js_VtafjXmRvoUgAzqzYTA3Wrjkx9wcWhjP0G4ZnnqRamA.js"></script>
<![endif]-->

    <meta name="uri-translation" content="on" />
    <script>
window['_fs_debug'] = false; window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = 'BX3Q1';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
g.consent=function(a){g("consent",!arguments.length||a)};
g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
g.clearUserCookie=function(){};
})(window,document,window['_fs_namespace'],'script','user');
    </script>
  </head>
  <body class="path-node page-node-type-support-doc has-glyphicons">


<section id="block-gtranslate" class="block block-gtranslate block-gtranslate-block clearfix">
  
    

      



  </section>


  </div>

      </div>
      

                    <div class="navbar-collapse collapse">
            <div class="region region-navigation-collapsible">
    

  </div>

        </div>
          </header>
  
    <div class="full-width-headline">
    <div class="container">
      <div class="row">
        <div class="col-sm-12" role="heading">
            <div class="region region-header">
          <section id="block-brightcoveheadlineblock" class="block block-bc-general block-bc-general-headline-block clearfix">
  
    

      Documentation
  </section>


  </div>

        </div>
      </div>
    </div>
  </div>
  
      <div role="main" class="main-container container  js-quickedit-main-content">
    <div class="row">

                              <aside class="col-sm-3" role="complementary">
              <div class="region region-sidebar-first">
    <section class="bc-search-fixes-search-block-form block block-bc-search-fixes block-bc-search-fixes-search-block clearfix" data-drupal-selector="bc-search-fixes-search-block-form" id="block-brightcovesearchblock">
  
    

      <form action="live-stream-configuration.html" method="post" id="bc-search-fixes-search-block-form" accept-charset="UTF-8">
  <div class="form-item js-form-item form-type-textfield js-form-type-textfield form-item-search js-form-item-search form-no-label form-group">
      <label for="edit-search" class="control-label sr-only">Search</label>
  
  
  <input data-drupal-selector="edit-search" class="form-text form-control" type="text" id="edit-search" name="search" value="" size="15" maxlength="128" placeholder="Search" />

  
  
  </div>
<input autocomplete="off" data-drupal-selector="form-g8knknekbhy-i19ep1w8-wk8qh2chp3if2qxaocaibe" type="hidden" name="form_build_id" value="form-g8KnknekBHy_I19Ep1W8-wk8qH2CHP3IF2QXaocaIBE" /><input data-drupal-selector="edit-bc-search-fixes-search-block-form" type="hidden" name="form_id" value="bc_search_fixes_search_block_form" /><div data-drupal-selector="edit-actions" class="form-actions form-group js-form-wrapper form-wrapper" id="edit-actions"><button data-drupal-selector="edit-submit" class="button js-form-submit form-submit btn-primary btn icon-only" type="submit" id="edit-submit" name="op" value="Search"><span class="sr-only">Search</span><span class="icon glyphicon glyphicon-search" aria-hidden="true"></span></button></div>

</form>

  </section>

<section id="block-inpagenavigationblock" class="hidden-xs block block-bc-ipnav block-bc-ipnav-block clearfix">
  
      <h2 class="block-title">On This Page</h2>
    

      <div class="bc-ipnav-block"></div>
  </section>


  </div>

          </aside>
              
                  <section class="col-sm-9">

                                      <div class="highlighted">  <div class="region region-highlighted">
    <div data-drupal-messages-fallback class="hidden"></div>

  </div>
</div>
                  
                
                
                
                          <a id="main-content"></a>
            <div class="region region-content">
        <h1 class="page-header"><span>Live Stream Configuration</span>
</h1>

  
<div class="node node--type-support-doc node--view-mode-full bcdocs-four-rows clearfix">

  

  <div class="group-first-row">
      </div>

  <div class="group-second-row">
  
  <div class="field field--name-field-products field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Product(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--product" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--product"></use>
        </svg>
              <div class="field--item">Video Cloud</div>
          <div class="field--item">Brightcove Player</div>
              </div>
      </div>

  <div class="field field--name-field-roles field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Role(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--roles" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--roles"></use>
        </svg>
              <div class="field--item">Player Developer</div>
              </div>
      </div>

</div>

  
<div class="group-third-row taxonomy__tags">
      <svg class="icon--label" viewBox="0 0 100 100">
      <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--label"></use>
    </svg>
    
  <div class="field field--name-field-topics field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Topic(s)</div>
          <div class="field--items">
              <div class="field--item">Live Streaming</div>
              </div>
      </div>

</div>

  <div class="group-fourth-row">
  
            <div class="field field--name-field-support-doc-body field--type-text-with-summary field--label-hidden field--item"><p>In this topic, you will learn how live stream configuration affects the bandwidth available for media playback. The goal of the document is to make you aware how incorrect configuration can impact the user experience for a live stream, rendering it nearly unplayable.</p>
          <aside class="bcls-aside bcls-aside--information">The live stream configuration is done in conjunction with your CDN and/or encoder. Brightcove Player can only play what is sent, and there are no Brightcove Player adjustments that can compensate for incorrect live stream configuration.</aside><article class="bcls-article">
<section id="Live_stream_configuration_terminology" class="bcls-section">
<h2>Live stream configuration terminology</h2>

<p>The calculator at the bottom of this document provides a rough estimate of overhead bandwidth based on live stream configuration. To be sure a baseline knowledge exists of live streaming and information needed by the calculator, some terms are defined here:</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th style="width: 25%">Term</th>
			<th>Definition</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td>HTTP Live Streaming (HLS)</td>
			<td>Sends audio and video as a series of small files called media segment files.</td>
		</tr>
		<tr>
			<td>Target Duration</td>
			<td>A parameter within the Media Playlist that specifies a maximum duration for any of the media segments.</td>
		</tr>
		<tr>
			<td>Media Playlist File</td>
			<td>An index file that provides an ordered list of the URLs of the media segment files. Sometimes also referred to as the manifest file.</td>
		</tr>
		<tr>
			<td>Master Playlist URL</td>
			<td>The location of the playlist file to be used in calculations.</td>
		</tr>
		<tr>
			<td>Relative URLs</td>
			<td>The paths in the playlist file can use URLs relative to the playlist, which can save significant space in the file - usually greater than 50%.</td>
		</tr>
		<tr>
			<td>Live Window</td>
			<td>The amount of time a viewer can go backwards in time in the live stream to view video. Under the hood, this translates into the number of segments that must be kept in the playlist file. So the longer the live window, the bigger the playlist file.</td>
		</tr>
		<tr>
			<td>Segment Duration</td>
			<td>The duration of each segment. As segment size decreases manifest size increases. The main drawbacks of a larger segment sizes are less adaptability to bandwidth changes and longer live latency.</td>
		</tr>
	</tbody>
</table>
</section>

<section id="How_HLS_Live_works" class="bcls-section">
<h2>How HLS Live works</h2>

<p>In a live stream, the player downloads the Media Playlist repeatedly at a set interval. That interval is an amount of time that is equal to the <strong>Target Duration</strong> of the Media Playlist.</p>

<p>For example, given a 100KB manifest with a 10 seconds target duration, the following calculation determines the bandwidth used just to download the Media Playlist:</p>

<ul>
	<li>100 KB / 10 seconds * 8 bits per byte = <strong>80kbps</strong> of bandwidth downloading the Media Playlist to continue video playback</li>
</ul>

<p>Realize this bandwidth counts as overhead that takes away from the bandwidth available for the actual media.</p>
</section>

<section id="Calculator" class="bcls-section">
<h2>Calculator</h2>

<p>Using the calculator below, you can manipulate certain live stream configuration values and see the results of those changes on <strong>Segment Count</strong>, <strong>Estimated Manifest Size</strong> and <strong>Estimated Bandwidth Overhead</strong>. It is difficult to provide hard best practice numbers for these results since only you know the bandwidth available for your target customers. But realize it makes no sense to provide a minimum rendition that is 300kbps and have a manifest that is so large it takes 1mbps to fetch. The consequences of too much overhead bandwidth can be the video might play but then stall, or the player might fall outside of the live window if it can't keep up with manifest updates. Basically, all available bandwidth will be used to download the manifest updates and no real video segments will be able to download.</p>

<table class="bcls-table">
	<tbody class="bcls-table__body">
		<tr>
			<td>Master Playlist URI</td>
			<td><input type="text" id="manifestUri" value="https://examplethingy-i.akamaihd.net/hls/live/999999/exampleustestthingy/master.m3u8" size="100" /></td>
		</tr>
		<tr>
			<td>Uses Relative URIs</td>
			<td><input type="checkbox" id="relativeUri" /></td>
		</tr>
		<tr>
			<td>Size of Live Window</td>
			<td><input style="display:inline-block;margin-right:10px;max-width:10%" type="number" id="liveWindowSize" value="5" /><select style="display:inline-block;max-width:20%" name="scale" id="liveWindowScale"><option value="1">Seconds</option><option value="3600">Hours</option><option value="86400" selected="selected">Days</option><option value="31557600">Years</option></select></td>
		</tr>
		<tr>
			<td>Average Segment Duration<br />
			(in seconds)</td>
			<td><input style="max-width: 10%" type="number" id="segmentDuration" value="9" /></td>
		</tr>
	</tbody>
</table>

<div>Segment Count:</div>

<div>Estimated Manifest Size:</div>

<div>Estimated Bandwidth Overhead:</div>
</section>
<script type="text/javascript">
          let bandwidthScaleTable = [
            'bps',
            'kbps',
            'mbps',
            'gbps',
            'tbps',
            'pbps',
            'ebps'
          ];
          let sizeScaleTable = [
            'B',
            'KB',
            'MB',
            'GB',
            'TB',
            'PB',
            'EB'
          ];
          let absoluteUriOverhead = 54;
          let relativeUriOverhead = 55;
          let hlsHeaderOverhead = 120; // The EXT-X-* tags at the start of a media playlist
          let hlsSegmentOverhead = 10; // The EXT-INF tag
          function foo() {
            let manifestUri = document.querySelector('#manifestUri').value;
            let rootManifest = manifestUri.split('/').slice(0, -1).join('/');
            let relativeUri = document.querySelector('#relativeUri').checked;
            let liveWindowSize = parseFloat(document.querySelector('#liveWindowSize').value);
            let liveWindowScale = parseFloat(document.querySelector('#liveWindowScale').value);
            let segmentDuration = parseFloat(document.querySelector('#segmentDuration').value);
            let liveWindowDuration = liveWindowSize * liveWindowScale;
            let baseUriLength = relativeUri ? relativeUriOverhead : absoluteUriOverhead + rootManifest.length;
            let segmentCount = Math.ceil(liveWindowDuration / segmentDuration);
            let estimate = hlsHeaderOverhead + (baseUriLength + hlsSegmentOverhead) * segmentCount;
            let bandwidthEstimate = estimate / segmentDuration * 8; //in bits per second
            let estimateScale = 0;
            while (estimate > 1024) {
              estimate /= 1024;
              estimateScale++;
            }
            let bandwidthScale = 0;
            while (bandwidthEstimate > 1024) {
              bandwidthEstimate /= 1024;
              bandwidthScale++;
            }
            document.querySelector('#manifestSize').innerHTML = estimate.toFixed(2) + sizeScaleTable[estimateScale];
            document.querySelector('#manifestBandwidth').innerHTML = bandwidthEstimate.toFixed(2) + bandwidthScaleTable[bandwidthScale];
            document.querySelector('#segmentCount').innerHTML = segmentCount;
          }
          let elements = document.querySelectorAll('input, select');
          for (let i = 0; i < elements.length; i++) elements[i].addEventListener('change', foo);
          foo();
        </script></article>
</div>
      
</div>

</div>


<section class="views-element-container block block-views block-views-blockrelated-content-by-field-block-1 clearfix" id="block-views-block-related-content-by-field-block-1">
  
    

      <div class="form-group"><div class="view view-related-content-by-field view-id-related_content_by_field view-display-id-block_1 js-view-dom-id-412b68cd632937a1466c8ddfefd33e9f592df4f0275ad60ee3b78f7c297f3d21">
  
    
      <div class="view-header">
      <h2>Related content</h2>
    </div>
      
      <div class="view-content">
      <div class="item-list">
  
  <ul>

          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="live-hls.html" hreflang="en">Live HLS</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="brightcove-player-sample-live-custom-error-message.html" hreflang="en">Brightcove Player Sample: Live Custom Error Message</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="playing-live-streams.html" hreflang="en">Playing Live Streams</a></span></span></div></li>
    
  </ul>

</div>

    </div>
  
          </div>
</div>

  </section>


  </div>

              </section>

                </div>
  </div>

      
  
  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"node\/18114","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","google_analytics":{"trackOutbound":true,"trackMailto":true,"trackDownload":true,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"},"bootstrap":{"forms_has_error_value_toggle":1,"modal_animation":1,"modal_backdrop":"true","modal_focus_input":1,"modal_keyboard":1,"modal_select_text":1,"modal_show":1,"modal_size":"","popover_enabled":1,"popover_animation":1,"popover_auto_close":1,"popover_container":"body","popover_content":"","popover_delay":"0","popover_html":0,"popover_placement":"right","popover_selector":"","popover_title":"","popover_trigger":"click"},"ajaxTrustedUrl":{"form_action_p_pvdeGsVG5zNF_XLGPTvYSKCf43t8qZYSwcfZl2uzM":true},"user":{"uid":0,"permissionsHash":"3b7fdb4927baca3ee2939edeb777485b3e2c2d36cf8c80e0d8f49c6dc5e2eeca"}}</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

  <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"e78a80aa93","applicationID":"129613202","transactionName":"YwBUZkcFVktUWhJQX1pKd1FBDVdWGn0UTEBVCWpxWhZdZHNWFFRscgpEX3cRUVRRXBQUDkYAWFZQFmhUVFoDUV9YAVNAcwtKVXRaElBfWg==","queueTime":0,"applicationTime":193,"atts":"T0dXEA8fRUU=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>
