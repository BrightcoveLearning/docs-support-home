<!DOCTYPE html>
<html  lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
<script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-2728311-17", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");</script>
<meta name="Generator" content="Drupal 8 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="sites/default/files/favicon-64.png" type="image/png" />
<link rel="alternate" hreflang="en" href="upgrading-ima3-plugin-version-3.html" />
<link rel="canonical" href="upgrading-ima3-plugin-version-3.html" />
<link rel="shortlink" href="upgrading-ima3-plugin-version-3.html" />
<link rel="revision" href="upgrading-ima3-plugin-version-3.html" />

    <title>Upgrading to IMA3 Plugin Version 3 | Brightcove Learning</title>
    <link rel="stylesheet" media="all" href="sites/default/files/css/css_d7PoQ20hWbRiei75VgExP_tm8C1ylIRfzB3zIYLc5Cw_q23msc.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/@unicorn-fail/drupal-bootstrap-styles@0.0.2/dist/3.4.0/8.x-3.x/drupal-bootstrap.min.css" />


    
<!--[if lte IE 8]>
<script src="/sites/default/files/js/js_VtafjXmRvoUgAzqzYTA3Wrjkx9wcWhjP0G4ZnnqRamA.js"></script>
<![endif]-->

    <meta name="uri-translation" content="on" />
    <script>
window['_fs_debug'] = false; window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = 'BX3Q1';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
g.consent=function(a){g("consent",!arguments.length||a)};
g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
g.clearUserCookie=function(){};
})(window,document,window['_fs_namespace'],'script','user');
    </script>
  </head>
  <body class="path-node page-node-type-support-doc has-glyphicons">


<section id="block-gtranslate" class="block block-gtranslate block-gtranslate-block clearfix">
  
    

      



  </section>


  </div>

      </div>
      

                    <div class="navbar-collapse collapse">
            <div class="region region-navigation-collapsible">
    

  </div>

        </div>
          </header>
  
    <div class="full-width-headline">
    <div class="container">
      <div class="row">
        <div class="col-sm-12" role="heading">
            <div class="region region-header">
          <section id="block-brightcoveheadlineblock" class="block block-bc-general block-bc-general-headline-block clearfix">
  
    

      Documentation
  </section>


  </div>

        </div>
      </div>
    </div>
  </div>
  
      <div role="main" class="main-container container  js-quickedit-main-content">
    <div class="row">

                              <aside class="col-sm-3" role="complementary">
              <div class="region region-sidebar-first">
    <section class="bc-search-fixes-search-block-form block block-bc-search-fixes block-bc-search-fixes-search-block clearfix" data-drupal-selector="bc-search-fixes-search-block-form" id="block-brightcovesearchblock">
  
    

      <form action="upgrading-ima3-plugin-version-3.html" method="post" id="bc-search-fixes-search-block-form" accept-charset="UTF-8">
  <div class="form-item js-form-item form-type-textfield js-form-type-textfield form-item-search js-form-item-search form-no-label form-group">
      <label for="edit-search" class="control-label sr-only">Search</label>
  
  
  <input data-drupal-selector="edit-search" class="form-text form-control" type="text" id="edit-search" name="search" value="" size="15" maxlength="128" placeholder="Search" />

  
  
  </div>
<input autocomplete="off" data-drupal-selector="form-tmwl7by7t7xjcel-73rfug2i6o0encymfts0ygkjmno" type="hidden" name="form_build_id" value="form-tMwL7bY7t7xJCEL-73rFug2I6O0enCYmFts0yGKJMNo" /><input data-drupal-selector="edit-bc-search-fixes-search-block-form" type="hidden" name="form_id" value="bc_search_fixes_search_block_form" /><div data-drupal-selector="edit-actions" class="form-actions form-group js-form-wrapper form-wrapper" id="edit-actions"><button data-drupal-selector="edit-submit" class="button js-form-submit form-submit btn-primary btn icon-only" type="submit" id="edit-submit" name="op" value="Search"><span class="sr-only">Search</span><span class="icon glyphicon glyphicon-search" aria-hidden="true"></span></button></div>

</form>

  </section>

<section id="block-inpagenavigationblock" class="hidden-xs block block-bc-ipnav block-bc-ipnav-block clearfix">
  
      <h2 class="block-title">On This Page</h2>
    

      <div class="bc-ipnav-block"></div>
  </section>


  </div>

          </aside>
              
                  <section class="col-sm-9">

                                      <div class="highlighted">  <div class="region region-highlighted">
    <div data-drupal-messages-fallback class="hidden"></div>

  </div>
</div>
                  
                
                
                
                          <a id="main-content"></a>
            <div class="region region-content">
        <h1 class="page-header"><span>Upgrading to IMA3 Plugin Version 3</span>
</h1>

  
<div class="node node--type-support-doc node--view-mode-full bcdocs-four-rows clearfix">

  

  <div class="group-first-row">
      </div>

  <div class="group-second-row">
  
  <div class="field field--name-field-products field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Product(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--product" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--product"></use>
        </svg>
              <div class="field--item">Video Cloud</div>
          <div class="field--item">Brightcove Player</div>
              </div>
      </div>

  <div class="field field--name-field-roles field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Role(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--roles" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--roles"></use>
        </svg>
              <div class="field--item">Studio User</div>
          <div class="field--item">Player Developer</div>
              </div>
      </div>

</div>

  
<div class="group-third-row taxonomy__tags">
      <svg class="icon--label" viewBox="0 0 100 100">
      <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--label"></use>
    </svg>
    
  <div class="field field--name-field-topics field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Topic(s)</div>
          <div class="field--items">
              <div class="field--item">Advertising</div>
              </div>
      </div>

</div>

  <div class="group-fourth-row">
  
            <div class="field field--name-field-support-doc-body field--type-text-with-summary field--label-hidden field--item"><p>In this topic, you will learn about upgrading to the IMA3 Advertising Plugin version 3.</p><article class="bcls-article"><section class="bcls-section"><h2 id="Overview">Overview</h2>

<p>In May of 2018 Brightcove released version 3 of the IMA Advertising plugin. The update includes many major improvements in reliability, and other areas, which are detailed in the next section of this document. The update is for Brightcove Player version 6 and higher only. Existing version 6 players will not be migrated to version 3 automatically as some integrations may need to be updated to support the new version. Brightcove encourages you to read this document fully and then test the changes before upgrading.</p>
</section><section class="bcls-section"><h2 id="Improvements">Improvements</h2>

<p>The following is a list of improvements made in version 3 of the plugin:</p>

<ul><li>The pluginâ€™s handling of video source changes has been fundamentally reworked, resulting in far greater reliability when used with playlists.</li>
	<li>Setting the server URL can now be delayed, allowing for easy integration of asynchronous workflows such as header bidding or macros based on media info. The following are two examples:
	<ul><li>The <a href="jump-start-header-bidding-ad.html">Jump Start: Header Bidding Ad</a> document.</li>
		<li>The <a href="advertising-ima3-plugin.html#Implement_using_code">Implement using code</a> section of the IMA3 plugin document.</li>
	</ul></li>
	<li>A bug has been fixed that could have led to a longer timeout than expected.</li>
	<li>Flash support has been removed for improved performance.</li>
	<li>Various additional bug fixes and reliability improvements are rolled into the new version.</li>
	<li>
	<p>You can give ad macros default values. A default value can be provided within a macro, in which case this value will be used where a variable is undefined. The syntax is:</p>

	<pre class="line-numbers">
<code class="language-javascript notranslate">{macro=default}</code></pre>

	<p>For instance,</p>

	<pre class="line-numbers">
<code class="language-javascript notranslate">http://example.com/ad/{pageVariable.adConf=1234}</code></pre>

	<p>would resolve to the following if <code class="notranslate">window.adConf</code> is undefined:</p>

	<pre class="line-numbers">
http://example.com/ad/1234</pre>
	</li>
</ul></section><section class="bcls-section"><h2 id="Technical_details">Technical details</h2>

<p>To improve reliability, the Brightcove IMA plugin has updated its dependency on <strong>videojs-contrib-ads</strong>, the open source Video.js ad framework, to version 6. This is a major maintenance update. You can learn more about <strong>videojs-contrib-ads</strong> version 6 on the <a href="http://blog.videojs.com/videojs-contrib-ads-6/">Video.js blog</a>.</p>

<p>This update removes a root cause of some content flashes that appeared before prerolls. The solution uses <a href="https://blog.videojs.com/feature-spotlight-middleware/">Video.js middleware</a> to remove the need to do a quick play and pause at the beginning of playback.</p>
</section><section class="bcls-section"><h2 id="Migrating_to_version_3">Migrating to version 3</h2>

<p>Existing players will NOT be automatically upgraded to version 3 of the Brightcove IMA plugin. In the default (legacy) Studio interface, version 2 of the IMA plugin will always be used, as it has in the past. In the beta (new) Studio interface, the <strong>Advertising</strong> section has a dropdown to allow you to pick which version of the IMA Plugin to use. This new interface can be used to migrate players. Brightcove strongly recommends reviewing your integration and carefully testing your player when upgrading.</p>

<p>Newly created players will use version 3 by default when advertising is enabled. They can be manually set to version 2 if needed.</p>

<p>Following is a list of changes that may require integrations to be updated:</p>

<ul><li>You may want to test to make sure you were not depending on a timeout longer than what is specified in your configuration.</li>
	<li>The <code class="notranslate">ended</code> events are no longer delayed by one second. If your integration responds to <code class="notranslate">ended</code> events, you should test that the integration continues to work as expected. Generally, this means that such integrations will perform better.</li>
	<li>The <code class="notranslate">player.ads.state</code> property is now deprecated. Brightcove has seen it used in some integrations to check if the player is in ad mode, but it is generally done incorrectly. A better alternative is to use the <code class="notranslate">player.ads.isInAdMode()</code> method.</li>
	<li>The <code class="notranslate">contentplayback</code> event has been removed. It is an implementation detail that is no longer needed, but we have found that some integrations use it. Use the <code class="notranslate">playing</code> event instead.</li>
	<li>Beginning of ad playback is indicated by the <code class="notranslate">ads-ad-started</code> event, which fires exactly once when each ad begins. While the <code class="notranslate">adplaying</code> event will continue to be emitted, it may now be emitted multiple times per ad play, so Brightcove therefore recommends using the <code class="notranslate">ads-ad-started</code> event instead.</li>
</ul></section><section class="bcls-section"><h2 id="Why_a_major_version_update?">Why a major version update?</h2>

<p>Although the changes may seem modest, several key aspects of the interface have changed, prompting a major version update. Specifically, the elimination of the <code class="notranslate">contentplayback</code> event, as well as the specific behavior of the <code class="notranslate">timeout</code> parameter. While these may seem minor, some integrations may depend on their particular behavior. Since even small changes can make a big difference in some customer implementations, Brightcove feels a major version increment was appropriate to indicate integrations should be thoroughly tested before use in production.</p>
</section></article></div>
      
</div>

</div>


<section class="views-element-container block block-views block-views-blockrelated-content-by-field-block-1 clearfix" id="block-views-block-related-content-by-field-block-1">
  
    

      <div class="form-group"><div class="view view-related-content-by-field view-id-related_content_by_field view-display-id-block_1 js-view-dom-id-bc9ed7be44100e92a0e035a6e35afc449d3b04eb207774d6a6c0371d36dd0b25">
  
    
      <div class="view-header">
      <h2>Related content</h2>
    </div>
      
      <div class="view-content">
      <div class="item-list">
  
  <ul>

          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="advertising-ima3-plugin.html" hreflang="en">Advertising with the IMA3 Plugin</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="step-step-implementing-advertising.html" hreflang="en">Step-by-Step: Implementing Advertising</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="plugin-version-reference.html" hreflang="en">Plugin Version Reference</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="playerplugin-version-testing.html" hreflang="en">Player/Plugin Version Testing</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="plugin-registry.html" hreflang="en">Plugin Registry</a></span></span></div></li>
    
  </ul>

</div>

    </div>
  
          </div>
</div>

  </section>


  </div>

              </section>

                </div>
  </div>

      
  
  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"node\/18596","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","google_analytics":{"trackOutbound":true,"trackMailto":true,"trackDownload":true,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"},"bootstrap":{"forms_has_error_value_toggle":1,"modal_animation":1,"modal_backdrop":"true","modal_focus_input":1,"modal_keyboard":1,"modal_select_text":1,"modal_show":1,"modal_size":"","popover_enabled":1,"popover_animation":1,"popover_auto_close":1,"popover_container":"body","popover_content":"","popover_delay":"0","popover_html":0,"popover_placement":"right","popover_selector":"","popover_title":"","popover_trigger":"click"},"ajaxTrustedUrl":{"form_action_p_pvdeGsVG5zNF_XLGPTvYSKCf43t8qZYSwcfZl2uzM":true},"user":{"uid":0,"permissionsHash":"3b7fdb4927baca3ee2939edeb777485b3e2c2d36cf8c80e0d8f49c6dc5e2eeca"}}</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

  </body>
</html>
