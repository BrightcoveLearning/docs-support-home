<!DOCTYPE html>
<html  lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
<script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-2728311-17", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");</script>
<meta name="Generator" content="Drupal 8 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="sites/default/files/favicon-64.png" type="image/png" />
<link rel="alternate" hreflang="en" href="troubleshooting-audience-issues.html" />
<link rel="canonical" href="troubleshooting-audience-issues.html" />
<link rel="shortlink" href="troubleshooting-audience-issues.html" />
<link rel="revision" href="troubleshooting-audience-issues.html" />

    <title>Troubleshooting Audience Issues | Brightcove Learning</title>
    <link rel="stylesheet" media="all" href="sites/default/files/css/css_d7PoQ20hWbRiei75VgExP_tm8C1ylIRfzB3zIYLc5Cw_q23msc.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/@unicorn-fail/drupal-bootstrap-styles@0.0.2/dist/3.4.0/8.x-3.x/drupal-bootstrap.min.css" />


    
<!--[if lte IE 8]>
<script src="/sites/default/files/js/js_VtafjXmRvoUgAzqzYTA3Wrjkx9wcWhjP0G4ZnnqRamA.js"></script>
<![endif]-->

    <meta name="uri-translation" content="on" />
    <script>
window['_fs_debug'] = false; window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = 'BX3Q1';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
g.consent=function(a){g("consent",!arguments.length||a)};
g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
g.clearUserCookie=function(){};
})(window,document,window['_fs_namespace'],'script','user');
    </script>
  </head>
  <body class="path-node page-node-type-support-doc has-glyphicons">


<section id="block-gtranslate" class="block block-gtranslate block-gtranslate-block clearfix">
  
    

      



  </section>


  </div>

      </div>
      

                    <div class="navbar-collapse collapse">
            <div class="region region-navigation-collapsible">
    

  </div>

        </div>
          </header>
  
    <div class="full-width-headline">
    <div class="container">
      <div class="row">
        <div class="col-sm-12" role="heading">
            <div class="region region-header">
          <section id="block-brightcoveheadlineblock" class="block block-bc-general block-bc-general-headline-block clearfix">
  
    

      Documentation
  </section>


  </div>

        </div>
      </div>
    </div>
  </div>
  
      <div role="main" class="main-container container  js-quickedit-main-content">
    <div class="row">

                              <aside class="col-sm-3" role="complementary">
              <div class="region region-sidebar-first">
    <section class="bc-search-fixes-search-block-form block block-bc-search-fixes block-bc-search-fixes-search-block clearfix" data-drupal-selector="bc-search-fixes-search-block-form" id="block-brightcovesearchblock">
  
    

      <form action="troubleshooting-audience-issues.html" method="post" id="bc-search-fixes-search-block-form" accept-charset="UTF-8">
  <div class="form-item js-form-item form-type-textfield js-form-type-textfield form-item-search js-form-item-search form-no-label form-group">
      <label for="edit-search" class="control-label sr-only">Search</label>
  
  
  <input data-drupal-selector="edit-search" class="form-text form-control" type="text" id="edit-search" name="search" value="" size="15" maxlength="128" placeholder="Search" />

  
  
  </div>
<input autocomplete="off" data-drupal-selector="form-jhkzpzmuserdfff-vwewb2sdfnlbqd6joamhpywj0wc" type="hidden" name="form_build_id" value="form-jHkZpZmUSERDFFf_vWewb2SdFnlBqd6joAMhPyWJ0Wc" /><input data-drupal-selector="edit-bc-search-fixes-search-block-form" type="hidden" name="form_id" value="bc_search_fixes_search_block_form" /><div data-drupal-selector="edit-actions" class="form-actions form-group js-form-wrapper form-wrapper" id="edit-actions"><button data-drupal-selector="edit-submit" class="button js-form-submit form-submit btn-primary btn icon-only" type="submit" id="edit-submit" name="op" value="Search"><span class="sr-only">Search</span><span class="icon glyphicon glyphicon-search" aria-hidden="true"></span></button></div>

</form>

  </section>

<section id="block-inpagenavigationblock" class="hidden-xs block block-bc-ipnav block-bc-ipnav-block clearfix">
  
      <h2 class="block-title">On This Page</h2>
    

      <div class="bc-ipnav-block"></div>
  </section>


  </div>

          </aside>
              
                  <section class="col-sm-9">

                                      <div class="highlighted">  <div class="region region-highlighted">
    <div data-drupal-messages-fallback class="hidden"></div>

  </div>
</div>
                  
                
                
                
                          <a id="main-content"></a>
            <div class="region region-content">
        <h1 class="page-header"><span>Troubleshooting Audience Issues</span>
</h1>

  
<div class="node node--type-support-doc node--view-mode-full bcdocs-four-rows clearfix">

  

  <div class="group-first-row">
      </div>

  <div class="group-second-row">
  
  <div class="field field--name-field-products field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Product(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--product" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--product"></use>
        </svg>
              <div class="field--item">Video Cloud</div>
          <div class="field--item">Audience</div>
              </div>
      </div>

  <div class="field field--name-field-roles field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Role(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--roles" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--roles"></use>
        </svg>
              <div class="field--item">Studio User</div>
              </div>
      </div>

</div>

  
<div class="group-third-row taxonomy__tags">
      <svg class="icon--label" viewBox="0 0 100 100">
      <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--label"></use>
    </svg>
    
  <div class="field field--name-field-topics field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Topic(s)</div>
          <div class="field--items">
              <div class="field--item">Audience/Marketing Automation</div>
          <div class="field--item">Troubleshooting/Error Handling</div>
              </div>
      </div>

</div>

  <div class="group-fourth-row">
  
            <div class="field field--name-field-support-doc-body field--type-text-with-summary field--label-hidden field--item"><p>In this topic you will learn how to troubleshoot the common issues publishers have encountered when working with the Audience module.</p><div class="BCL-concept">
<h2 id="logging">Enabling verbose logging</h2>

<p>Enabling verbose logging allows you to view Audience related information in the browser console. This is helpful when trying to debug Audience issues. Verbose logging can be enabled by adding <code>bcverbose=1</code> to the URL of the page with the Audience-enabled player or by configuring the Audience plugin with the <code>"verbose": true</code> option:</p>

<div><img class="bcls-image--no-border" alt="configure plugin" src="https://img.brightcove.com/node18487-plugin.png" /></div>

<p>Log messages can be viewed in the console.</p>

<div><img class="bcls-image--no-border" alt="console" src="https://img.brightcove.com/node18487-console.png" /></div>
</div>

<div class="BCL-concept">
<h2 id="leadform">Lead form issues</h2>

<p>Below are some common issues and questions we have seen with lead forms.</p>

<h3>Why do lead forms continue to show for Marketo Munchkin integrations even after the form has been submitted?</h3>

<p>The Munchkin integration doesn't have an API that we can use to ask if the user is known or not. Since we don't know if they’re a known user, we always display the lead form. The Marketo REST integration does offer APIs so we can determine known vs. unknown users. Switching to a Marketo REST integration is recommended and can avoid this issue.</p>

<h3>My custom lead form is set to redirect on submit. Why do I see the page that’s redirected to for a second or two after submitting the form?</h3>

<p>We have to wait until the page that’s redirected to has fully loaded before dismissing the lead form. One solution is to redirect to a page that is lightweight (doesn’t have many images or JavaScript), or the blank page we set up (located at <code>https://map.brightcove.com/lead/complete</code>) specifically to address this problem.</p>

<h3>I configured my lead form with confirmation HTML. Why do I see a black screen for a couple seconds after submission?</h3>

<p>Make sure to change the text color of the HTML. The confirmation HTML is probably visible, you just can’t see it because the default text color is black.</p>

<h3>Why doesn't my HubSpot lead form dismiss after submission?</h3>

<p>Make sure the lead form in HubSpot is configured to redirect to <code><strong>http://map.brightcove.com/lead/complete</strong></code>. If you want to display a confirmation message, configure this within Audience and not HubSpot.</p>

<h3>Why is my lead form not displaying?</h3>

<p>If your lead form is not displaying, first ensure all the criteria for showing a lead form have been met. Note that criteria that depend on multiple videos being watched will not work across page refreshes. They are meant for use cases where the next video is automatically queued in the same player.</p>

<ol class="bcls-tasklist"><li>Confirm that the Audience plugin has been added to the player. For information, see <a href="creating-audience-enabled-player.html">Creating an Audience-enabled Player</a>.</li>
	<li>Confirm that the integration has been correctly set up and is sent to the plugin.</li>
	<li>Confirm that the lead form has been added to that player. The response to the call the plugin makes for its config should contain lead form display information under the leadForm property if a lead form has been added to the player.
	<div><img class="bcls-image--no-border" alt="leadform debug" src="https://img.brightcove.com/node18487-leadform-debug.png" /></div>
	</li>
	<li>Confirm that the viewer is not already a lead. The lead form will only be shown if Audience has identified that the viewer is not already a lead in the marketing automation platform (MAP) or has not already filled out a lead form. The plugin makes a separate JSONP call to the Audience server to check if the viewer is a lead. If the viewer is a lead, the server responds with a status of 1 and any other identifiers that could be useful in syncing the view data to the MAP. If the viewer is not a lead, the server responds with a status of 0.
	<ul><li>Example response for a viewer that is not a lead:
		<pre>
/**/ typeof jsonpCallback_2935650618 === 'function' &amp;&amp;
 jsonpCallback_2935650618({"status":0});</pre>
		</li>
		<li>Example response for a viewer that is a lead:
		<pre>
/**/ typeof jsonpCallback_45936049288 === 'function' &amp;&amp;
 jsonpCallback_45936049288({"status":1,"eloqua":{"contactId":"5","internalId":"CTCPB000000000005"}});</pre>
		</li>
	</ul></li>
</ol></div>

<div class="BCL-concept">
<h2 id="sync">Sync issues</h2>

<p>Below are some common sync issues we have seen.</p>

<h3>Marketo REST view events fail to sync with the error Activity type id ‘000000’ not found</h3>

<p>This happens when the custom Marketo activity associated with the integration has been deleted. When a Marketo REST integration is created, we fetch the activity, store its ID, and use that ID to sync events. The solution (assuming a new Brightcove Video View activity has been created) is to disconnect and re-create the integration to pick up the ID of the new activity.</p>

<h3>View Events not Syncing</h3>

<p>When the integration is correctly set up with a MAP, viewing data from an Audience-enabled player should populate the <strong>All Recent Activity</strong> page and view events corresponding to a known lead in the respective MAP should eventually sync to the tool.</p>

<p>First, ensure view data is being displayed on the <strong>All Recent Activity</strong> page:</p>

<div><img class="bcls-image--no-border" alt="viewer activity" src="https://img.brightcove.com/node18487-viewer-activity.png" /></div>

<p>If view events are listed but are not in the MAP, the user may have authorized Audience with their MAP as a user that doesn’t have sufficient permissions to import view data into the MAP via the API or the integration is not correctly configured. The Audience homepage lists the status of recent view event sync operations. Feedback should be available there to indicate why view events are not syncing to the MAP.</p>

<p>If view events are showing up in Audience, check to see if the <strong>Status</strong> column is <strong>synced</strong>. This indicates that Audience was able to successfully deliver the data into your MAP. If you see a status of <strong>unknown_contact</strong>, this means the user was not known and your MAP cannot receive it. Most MAPs only accept third-party data for known users. The solution is to use a custom lead form created in your MAP to ensure you are indeed a known user.</p>

<p>If view events are not listed, Audience may have not been setup with a Audience-enabled player. Using a browser with developer tools enabled, visit a page that contains the problematic video and ensure that certain HTTP calls are made by the Audience plugin.</p>

<p>When the player loads, the plugin should make a call to the Audience config endpoint to obtain parameters that determine the behavior of the plugin based on the integration:</p>

<div><img class="bcls-image--no-border" alt="plugin config" src="https://img.brightcove.com/node18487-debug-config.png" /></div>

<p>If this call is missing from the network traffic, it means the player has not been assigned an integration. For information on how to do this, see <a href="creating-audience-enabled-player.html">Creating an Audience-enabled Player</a>.</p>

<p>This call is made using JSONP. If the JSONP response is an empty object, then it is possible the embed code is incorrect and specifies the wrong account ID. An empty object will be returned from this endpoint if the config request fails to include both account and player URL parameters or if the specified account could not be retrieved from the Audience-specific database (most likely the wrong account was specified in the URL/embed code and it was not found in the database).</p>

<pre>
/**/ typeof jsonpCallback_78754666587 === 'function' &amp;&amp; jsonpCallback_78754666587({});</pre>

<p>If the object has an ID parameter, but is missing an integration parameter, the user has not set up an integration with their marketing automation tool and view events will not be recorded.</p>

<p>You will also have data sync issues if the Standard Embed (iframe) code was used when publishing the Audience-enabled player. Use the Advanced Embed (in-page) code when publishing your player. Standard Embed (iframe) publishing code will not work as the Audience plugin will be running inside of an iframe and therefore will be unable to access the parent page cookies or URL parameters.</p>
</div>

<div class="BCL-concept">
<h2 id="connection">Connection issues</h2>

<h3>The Audience module says that it can’t setup an Eloqua integration</h3>

<p>Check the<a href="integrating-video-cloud-oracle-eloqua.html#requirements"> requirements for Eloqua</a>. If you are using the IP whitelist security feature, Audience won’t be able to communicate with Eloqua unless you whitelist the specified IP addresses to allow Audience - Eloqua traffic. Contact <a href="https://help.brightcove.com/en/contact/create">Brightcove Support</a> for more information.</p>

<h3>Audience says that my Marketo REST custom activity is missing fields, but when I look in Marketo, I can see that all fields exist</h3>

<p>There are a few things to check:</p>

<ol class="bcls-tasklist"><li>The field names must match exactly. "Event 1" is not the same as "Event1".</li>
	<li>The activity must be approved and not in a draft state.</li>
	<li>If you deleted the custom activity and re-created it without setting up a new Marketo REST integration, you must disconnect your old integration and create a new one. We lookup the custom activity and store its ID value for each integration. If the ID changes by deleting it, we won’t be able to pick up the new one automatically.</li>
	<li>If new fields were recently added to the activity it could take up to 24 hours for the change to take effect in Marketo’s system.</li>
</ol></div>
<!-- End of Drupal content --></div>
      
</div>

</div>


<section class="views-element-container block block-views block-views-blockrelated-content-by-field-block-1 clearfix" id="block-views-block-related-content-by-field-block-1">
  
    

      <div class="form-group"><div class="view view-related-content-by-field view-id-related_content_by_field view-display-id-block_1 js-view-dom-id-01af548e2223e18174beff6f055ebf2d9f66e38ec7e57754b1c7cc1f0a500a5c">
  
    
      <div class="view-header">
      <h2>Related content</h2>
    </div>
      
      <div class="view-content">
      <div class="item-list">
  
  <ul>

          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="getting-started-audience-module.html" hreflang="en">Getting Started with the Audience Module</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="creating-audience-enabled-player.html" hreflang="en">Creating an Audience-enabled Player</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="marketo-rest-integration-testing-guide.html" hreflang="en">Marketo REST Integration Testing Guide</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="hubspot-rest-api-integration-testing-guide.html" hreflang="en">HubSpot REST API Integration Testing Guide</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="eloqua-integration-testing-guide.html" hreflang="en">Eloqua Integration Testing Guide</a></span></span></div></li>
    
  </ul>

</div>

    </div>
  
          </div>
</div>

  </section>


  </div>

              </section>

                </div>
  </div>

      
  
  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"node\/18487","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","google_analytics":{"trackOutbound":true,"trackMailto":true,"trackDownload":true,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"},"bootstrap":{"forms_has_error_value_toggle":1,"modal_animation":1,"modal_backdrop":"true","modal_focus_input":1,"modal_keyboard":1,"modal_select_text":1,"modal_show":1,"modal_size":"","popover_enabled":1,"popover_animation":1,"popover_auto_close":1,"popover_container":"body","popover_content":"","popover_delay":"0","popover_html":0,"popover_placement":"right","popover_selector":"","popover_title":"","popover_trigger":"click"},"ajaxTrustedUrl":{"form_action_p_pvdeGsVG5zNF_XLGPTvYSKCf43t8qZYSwcfZl2uzM":true},"user":{"uid":0,"permissionsHash":"3b7fdb4927baca3ee2939edeb777485b3e2c2d36cf8c80e0d8f49c6dc5e2eeca"}}</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

  <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"e78a80aa93","applicationID":"129613202","transactionName":"YwBUZkcFVktUWhJQX1pKd1FBDVdWGn0UTEBVCWpxWhZdZHNWFFRscgpEX3cRUVRRXBQUDkYAWFZQFmhUVFoDUV9YAVNAcwtKVXRaElBfWg==","queueTime":0,"applicationTime":186,"atts":"T0dXEA8fRUU=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>
