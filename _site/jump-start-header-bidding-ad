<!DOCTYPE html>
<html  lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
<script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-2728311-17", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");</script>
<meta name="Generator" content="Drupal 8 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="sites/default/files/favicon-64.png" type="image/png" />
<link rel="alternate" hreflang="en" href="jump-start-header-bidding-ad.html" />
<link rel="canonical" href="jump-start-header-bidding-ad.html" />
<link rel="shortlink" href="jump-start-header-bidding-ad.html" />
<link rel="revision" href="jump-start-header-bidding-ad.html" />

    <title>Jump Start: Header Bidding Ad | Brightcove Learning</title>
    <link rel="stylesheet" media="all" href="sites/default/files/css/css_d7PoQ20hWbRiei75VgExP_tm8C1ylIRfzB3zIYLc5Cw_q23msc.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/@unicorn-fail/drupal-bootstrap-styles@0.0.2/dist/3.4.0/8.x-3.x/drupal-bootstrap.min.css" />


    
<!--[if lte IE 8]>
<script src="/sites/default/files/js/js_VtafjXmRvoUgAzqzYTA3Wrjkx9wcWhjP0G4ZnnqRamA.js"></script>
<![endif]-->

    <meta name="uri-translation" content="on" />
    <script>
window['_fs_debug'] = false; window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = 'BX3Q1';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
g.consent=function(a){g("consent",!arguments.length||a)};
g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
g.clearUserCookie=function(){};
})(window,document,window['_fs_namespace'],'script','user');
    </script>
  </head>
  <body class="path-node page-node-type-support-doc has-glyphicons">


<section id="block-gtranslate" class="block block-gtranslate block-gtranslate-block clearfix">
  
    

      



  </section>


  </div>

      </div>
      

                    <div class="navbar-collapse collapse">
            <div class="region region-navigation-collapsible">
    

  </div>

        </div>
          </header>
  
    <div class="full-width-headline">
    <div class="container">
      <div class="row">
        <div class="col-sm-12" role="heading">
            <div class="region region-header">
          <section id="block-brightcoveheadlineblock" class="block block-bc-general block-bc-general-headline-block clearfix">
  
    

      Documentation
  </section>


  </div>

        </div>
      </div>
    </div>
  </div>
  
      <div role="main" class="main-container container  js-quickedit-main-content">
    <div class="row">

                              <aside class="col-sm-3" role="complementary">
              <div class="region region-sidebar-first">
    <section class="bc-search-fixes-search-block-form block block-bc-search-fixes block-bc-search-fixes-search-block clearfix" data-drupal-selector="bc-search-fixes-search-block-form" id="block-brightcovesearchblock">
  
    

      <form action="jump-start-header-bidding-ad.html" method="post" id="bc-search-fixes-search-block-form" accept-charset="UTF-8">
  <div class="form-item js-form-item form-type-textfield js-form-type-textfield form-item-search js-form-item-search form-no-label form-group">
      <label for="edit-search" class="control-label sr-only">Search</label>
  
  
  <input data-drupal-selector="edit-search" class="form-text form-control" type="text" id="edit-search" name="search" value="" size="15" maxlength="128" placeholder="Search" />

  
  
  </div>
<input autocomplete="off" data-drupal-selector="form-g8knknekbhy-i19ep1w8-wk8qh2chp3if2qxaocaibe" type="hidden" name="form_build_id" value="form-g8KnknekBHy_I19Ep1W8-wk8qH2CHP3IF2QXaocaIBE" /><input data-drupal-selector="edit-bc-search-fixes-search-block-form" type="hidden" name="form_id" value="bc_search_fixes_search_block_form" /><div data-drupal-selector="edit-actions" class="form-actions form-group js-form-wrapper form-wrapper" id="edit-actions"><button data-drupal-selector="edit-submit" class="button js-form-submit form-submit btn-primary btn icon-only" type="submit" id="edit-submit" name="op" value="Search"><span class="sr-only">Search</span><span class="icon glyphicon glyphicon-search" aria-hidden="true"></span></button></div>

</form>

  </section>

<section id="block-inpagenavigationblock" class="hidden-xs block block-bc-ipnav block-bc-ipnav-block clearfix">
  
      <h2 class="block-title">On This Page</h2>
    

      <div class="bc-ipnav-block"></div>
  </section>


  </div>

          </aside>
              
                  <section class="col-sm-9">

                                      <div class="highlighted">  <div class="region region-highlighted">
    <div data-drupal-messages-fallback class="hidden"></div>

  </div>
</div>
                  
                
                
                
                          <a id="main-content"></a>
            <div class="region region-content">
        <h1 class="page-header"><span>Jump Start: Header Bidding Ad</span>
</h1>

  
<div class="node node--type-support-doc node--view-mode-full bcdocs-four-rows clearfix">

  

  <div class="group-first-row">
      </div>

  <div class="group-second-row">
  
  <div class="field field--name-field-products field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Product(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--product" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--product"></use>
        </svg>
              <div class="field--item">Video Cloud</div>
          <div class="field--item">Brightcove Player</div>
              </div>
      </div>

  <div class="field field--name-field-roles field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Role(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--roles" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--roles"></use>
        </svg>
              <div class="field--item">Studio User</div>
          <div class="field--item">Player Developer</div>
              </div>
      </div>

</div>

  
<div class="group-third-row taxonomy__tags">
      <svg class="icon--label" viewBox="0 0 100 100">
      <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--label"></use>
    </svg>
    
  <div class="field field--name-field-topics field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Topic(s)</div>
          <div class="field--items">
              <div class="field--item">Advertising</div>
              </div>
      </div>

  <div class="field field--name-field-type field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Type</div>
              <div class="field--item">Support Doc</div>
          </div>

</div>

  <div class="group-fourth-row">
  
            <div class="field field--name-field-support-doc-body field--type-text-with-summary field--label-hidden field--item"><p>Enter values for the two form fields below to see header bidding in action using your player and video. (If you choose not to input your data, demo data is supplied.) The sample uses the AppNexus header bidding functionality.</p>
      <p>Below the player, the code for the player implementation is shown so you can copy and use.</p><script async src="https://acdn.adnxs.com/prebid/not-for-prod/1/prebid.js">
</script>
<style type="text/css">.video-js {
  width: 640px;
  height: 360px;
  }
  .bcls-code {
    color: #111;
    font-family: 'Source Code Pro', monospace;
    padding: 1em;
    width: 90%;
    min-height: 5em;
    background-color: #cfcfcf;
    font-size: 1rem;
  }
  .bcls-button {
    padding: .5em;
    background-color: #64AAB2;
    border: 1px black solid;
    border-radius: .5em;
    color: black;
    cursor: pointer;
  }
  fieldset {
    color: #64AAB2;
    border: 1px #64AAB2 solid;
    border-radius: .5em;
  }
  code {
    color: #E4B842;
    font-family: 'Source Code Pro', monospace;
  }
</style>
<link href="https://players.brightcove.net/videojs-ima3/3/videojs.ima3.min.css" rel="stylesheet" />
<div id="inputFields" class="input-fields">
<h3>Account Information</h3>

<div id="accountInfo">
<table class="bcls-table">
	<tbody class="bcls-table__body">
		<tr>
			<td>Video Cloud Account ID:</td>
			<td><input id="accountID" type="text" size="60" value="1507807800001" /></td>
		</tr>
		<tr>
			<td>Video ID:</td>
			<td><input id="videoID" type="text" size="60" value="5622718636001" /></td>
		</tr>
	</tbody>
</table>
</div>
</div>

<p><button id="buildPlayer" class="bcls-button" onclick="addPlayer()">Build the Player</button></p>

<h3>Player</h3>

<div style="width: 640px;height: 360px;">
<div id="placeHolder" style="width: 640px;height: 360px;background-color: #cfcfcf;">&nbsp;</div>
</div>

<h3>Publishing Code</h3>

<p><button id="copyCode" class="bcls-button" onclick="copyCode()">Copy Code to Clipboard</button></p>

<div><textarea id="publishingCode" class="bcls-code" style="width: 100%;height: 420px" onclick="this.select()"></textarea></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.7.5/beautify.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.7.5/beautify-css.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.7.5/beautify-html.min.js"></script><!-- custom script --><script type="text/JavaScript">
  var myPlayer,
      playerHTML,
      displayPlayerHTML,
      playerScript,
      publishingCode = document.getElementById('publishingCode'),
      accountID = document.getElementById('accountID'),
      videoID = document.getElementById('videoID'),
      configOptions = {};
  var pbjs = pbjs || {};
  pbjs.que = pbjs.que || [];
  iosDevice = !! navigator.platform.match(/iPhone|iPod|iPad/);
  //  Build the player and place in HTML DOM
  function addPlayer() {
    configOptions.accountID = accountID.value;
    configOptions.videoID = videoID.value;
    console.log('configOptions', configOptions);
    // Dynamically build the player video element, but only partially so it does not instantiate
    playerHTML = '<video-js id=\"myPlayerID\" data-embed=\"default\" class=\"video-js\" controls></video-js>';
    // Inject the player code into the DOM
    document.getElementById('placeHolder').innerHTML = playerHTML;
    // Add and execute the player script tag
    playerScript = document.createElement('script');
    playerScript.src = "//players.brightcove.net/" + configOptions.accountID + "/default_default/index.min.js";
    document.body.appendChild(playerScript);
    playerScript.onload = loadIMA;
  }
  function loadIMA() {
    ima = document.createElement('script');
    ima.src = '//players.brightcove.net/videojs-ima3/3/videojs.ima3.min.js';
    document.head.appendChild(ima);
    ima.onload = headerBidding;
  }
  function headerBidding() {
    // Instantiate player and immediately after call ima3 method
    myPlayerID.setAttribute('data-account', configOptions.accountID);
    myPlayerID.setAttribute('data-player', 'default');
    myPlayerID.setAttribute('data-video-id', configOptions.videoID);
    myPlayer = bc(document.getElementById("myPlayerID"));
    console.log('**********calling IMA3 plugin next');
    myPlayer.ima3({
      serverUrl: getServerUrl,
      debug: true,
      timeout: 5000,
      ima3SdkSettings: {
        "disableCustomPlaybackForIOS10Plus": true
      }
    });
    //FROM HEADER BIDDING CODE
    function getServerUrl(callback) {
      var videoAdUnit = {
        code: 'video1',
        mediaTypes: {
          video: {
            playerSize: [640, 480],
            context: 'instream'
          }
        },
        bids: [{
          bidder: 'appnexus',
          params: {
            placementId: iosDevice ? 13239390 : 13232361,
            video: {
              skipppable: true,
              playback_method: ['auto_play_sound_off']
            }
          }
        }]
      };
      pbjs.que.push(function () {
        pbjs.addAdUnits(videoAdUnit);
        pbjs.setConfig({
          debug: true,
          cache: {
            url: 'https://prebid.adnxs.com/pbc/v1/cache'
          }
        });
        pbjs.requestBids({
          bidsBackHandler: function (bids) {
            var videoUrl = pbjs.adServers.dfp.buildVideoUrl({
              adUnit: videoAdUnit,
              params: {
                iu: '/19968336/prebid_cache_video_adunit',
                cust_params: {
                  section: 'blog',
                  anotherKey: 'anotherValue'
                },
                output: 'vast'
              }
            });
            callback(videoUrl);
          }
        });
      });
    };
    myPlayer.ready(function () {
      console.log('**********in player ready');
      myPlayer.on("ima3error", function () {
        console.log("There was an ima3 error.");
      });
    });
    buildHTML();
  }
  function buildHTML() {
    var htmlText1,
        htmlText2,
        jsText,
        allFormattedCode;
    htmlText1 = '<!DOCTYPE html> <html> <head> <meta charset="UTF-8"> <title>Prebid Video -- Brightcove Player</title> <script async src="//acdn.adnxs.com/prebid/not-for-prod/1/prebid.js">\</script\> <link href="https://players.brightcove.net/videojs-ima3/3/videojs.ima3.min.css" rel="stylesheet"> \n </head> <body> <h1>Prebid Video -- Brightcove Player</h1> \n';
    displayPlayerHTML = '<video-js id="myPlayerID" data-account="' + configOptions.accountID + '" data-player="default" data-video-id="' + configOptions.videoID + '" data-embed="default" data-application-id class="video-js" playsinline controls width="640" height="480"></video-js>';
    htmlText1 += displayPlayerHTML;
    htmlText1 += playerScript.outerHTML;
    htmlText1 += '<script src="https://players.brightcove.net/videojs-ima3/3/videojs.ima3.min.js">\</script\>';
    htmlText1 += '<script type="text/javascript">';
    jsText = ' var pbjs = pbjs || {}; pbjs.que = pbjs.que || []; iosDevice = !! navigator.platform.match(/iPhone|iPod|iPad/); function getServerUrl(callback) { var videoAdUnit = { code: "video1", mediaTypes: { video: { playerSize: [640, 480], context: "instream" } }, bids: [{ bidder: "appnexus", params: { placementId: iosDevice ? 13239390 : 13232361, video: { skipppable: true, playback_method: ["auto_play_sound_off"] } } }] }; pbjs.que.push(function () { pbjs.addAdUnits(videoAdUnit); pbjs.setConfig({ debug: true, cache: { url: "https://prebid.adnxs.com/pbc/v1/cache" } }); pbjs.requestBids({ bidsBackHandler: function (bids) { var videoUrl = pbjs.adServers.dfp.buildVideoUrl({ adUnit: videoAdUnit, params: { iu: "/19968336/prebid_cache_video_adunit", cust_params: { section: "blog", anotherKey: "anotherValue" }, output: "vast" } }); callback(videoUrl); } }); }); }; bc("myPlayerID").ima3({ serverUrl: getServerUrl, debug: true, timeout: 5000, ima3SdkSettings: { "disableCustomPlaybackForIOS10Plus": true } }); var myPlayer = videojs.getPlayer("myPlayerID"); myPlayer.ready(function() { myPlayer.on("ima3error", function () { console.log("There was an ima3 error."); }); });';
    htmlText2 =  '\</script\> </body> </html>';
    htmlText1 = html_beautify(htmlText1, { "indent_size": 2 });
    jsText =  js_beautify(jsText, { "indent_size": 2, "indent_level": 10 });
    htmlText2 = html_beautify(htmlText2, { "indent_size": 2 });
    allFormattedCode = htmlText1 + '\n' + jsText + '\n' + htmlText2;
    publishingCode.textContent = allFormattedCode;
  }
  function copyCode() {
    publishingCode.select();
    document.execCommand('copy');
  }
</script></div>
      
</div>

</div>


<section class="views-element-container block block-views block-views-blockrelated-content-block-1 clearfix" id="block-views-block-related-content-block-1">
  
    

      <div class="form-group"><div class="view view-related-content view-id-related_content view-display-id-block_1 js-view-dom-id-5230387835bbcd3aa4c8d3a7fde5b42aab1875cf8a396787b396767551ac6a85">
  
    
      <div class="view-header">
      <h2>Related content</h2>
    </div>
      
      <div class="view-content">
      <div class="item-list">
  
  <ul>

          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="jump-start-pre-roll-ad.html" hreflang="en">Jump Start: Pre-roll Ad</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="jump-start-outstream-ad.html" hreflang="en">Jump Start: Outstream Ad</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="flash-no-longer-valid-ima.html" hreflang="en">Flash No Longer Valid with IMA</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="developer-basics-advanced-player-code.html" hreflang="en">Developer Basics: Advanced Player Code</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="upgrading-ima3-plugin-version-3.html" hreflang="en">Upgrading to IMA3 Plugin Version 3</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="configuring-player-advertising-using-players-module.html" hreflang="en">Configuring Player Advertising using the Players Module</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="running-network-path-trace.html" hreflang="en">Running a Network Path Trace</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="catalog-search-architecture.html" hreflang="en">Catalog Search Architecture</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="step-step-implementing-advertising.html" hreflang="en">Step-by-Step: Implementing Advertising</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="known-issues-studio-brightcove-player-and-apis.html" hreflang="en">Known Issues:  Studio, Brightcove Player and APIs</a></span></span></div></li>
    
  </ul>

</div>

    </div>
  
          </div>
</div>

  </section>


  </div>

              </section>

                </div>
  </div>

      
  
  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"node\/18620","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","google_analytics":{"trackOutbound":true,"trackMailto":true,"trackDownload":true,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"},"bootstrap":{"forms_has_error_value_toggle":1,"modal_animation":1,"modal_backdrop":"true","modal_focus_input":1,"modal_keyboard":1,"modal_select_text":1,"modal_show":1,"modal_size":"","popover_enabled":1,"popover_animation":1,"popover_auto_close":1,"popover_container":"body","popover_content":"","popover_delay":"0","popover_html":0,"popover_placement":"right","popover_selector":"","popover_title":"","popover_trigger":"click"},"ajaxTrustedUrl":{"form_action_p_pvdeGsVG5zNF_XLGPTvYSKCf43t8qZYSwcfZl2uzM":true},"user":{"uid":0,"permissionsHash":"3b7fdb4927baca3ee2939edeb777485b3e2c2d36cf8c80e0d8f49c6dc5e2eeca"}}</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

  <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"e78a80aa93","applicationID":"129613202","transactionName":"YwBUZkcFVktUWhJQX1pKd1FBDVdWGn0UTEBVCWpxWhZdZHNWFFRscgpEX3cRUVRRXBQUDkYAWFZQFmhUVFoDUV9YAVNAcwtKVXRaElBfWg==","queueTime":0,"applicationTime":254,"atts":"T0dXEA8fRUU=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>
