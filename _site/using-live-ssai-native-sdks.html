<!DOCTYPE html>
<html  lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
<script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-2728311-17", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");</script>
<meta name="Generator" content="Drupal 8 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="sites/default/files/favicon-64.png" type="image/png" />
<link rel="alternate" hreflang="en" href="using-live-ssai-native-sdks.html" />
<link rel="canonical" href="using-live-ssai-native-sdks.html" />
<link rel="shortlink" href="using-live-ssai-native-sdks.html" />
<link rel="revision" href="using-live-ssai-native-sdks.html" />

    <title>Using Live SSAI with the Native SDKs | Brightcove Learning</title>
    <link rel="stylesheet" media="all" href="sites/default/files/css/css_d7PoQ20hWbRiei75VgExP_tm8C1ylIRfzB3zIYLc5Cw_q23msc.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/@unicorn-fail/drupal-bootstrap-styles@0.0.2/dist/3.4.0/8.x-3.x/drupal-bootstrap.min.css" />


    
<!--[if lte IE 8]>
<script src="/sites/default/files/js/js_VtafjXmRvoUgAzqzYTA3Wrjkx9wcWhjP0G4ZnnqRamA.js"></script>
<![endif]-->

    <meta name="uri-translation" content="on" />
    <script>
window['_fs_debug'] = false; window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = 'BX3Q1';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
g.consent=function(a){g("consent",!arguments.length||a)};
g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
g.clearUserCookie=function(){};
})(window,document,window['_fs_namespace'],'script','user');
    </script>
  </head>
  <body class="path-node page-node-type-support-doc has-glyphicons">


<section id="block-gtranslate" class="block block-gtranslate block-gtranslate-block clearfix">
  
    

      



  </section>


  </div>

      </div>
      

                    <div class="navbar-collapse collapse">
            <div class="region region-navigation-collapsible">
    

  </div>

        </div>
          </header>
  
    <div class="full-width-headline">
    <div class="container">
      <div class="row">
        <div class="col-sm-12" role="heading">
            <div class="region region-header">
          <section id="block-brightcoveheadlineblock" class="block block-bc-general block-bc-general-headline-block clearfix">
  
    

      Documentation
  </section>


  </div>

        </div>
      </div>
    </div>
  </div>
  
      <div role="main" class="main-container container  js-quickedit-main-content">
    <div class="row">

                              <aside class="col-sm-3" role="complementary">
              <div class="region region-sidebar-first">
    <section class="bc-search-fixes-search-block-form block block-bc-search-fixes block-bc-search-fixes-search-block clearfix" data-drupal-selector="bc-search-fixes-search-block-form" id="block-brightcovesearchblock">
  
    

      <form action="using-live-ssai-native-sdks.html" method="post" id="bc-search-fixes-search-block-form" accept-charset="UTF-8">
  <div class="form-item js-form-item form-type-textfield js-form-type-textfield form-item-search js-form-item-search form-no-label form-group">
      <label for="edit-search" class="control-label sr-only">Search</label>
  
  
  <input data-drupal-selector="edit-search" class="form-text form-control" type="text" id="edit-search" name="search" value="" size="15" maxlength="128" placeholder="Search" />

  
  
  </div>
<input autocomplete="off" data-drupal-selector="form-ou-jl4mlu0p5v-ol83aepbtovuduuxsw6bixbyct1-g" type="hidden" name="form_build_id" value="form-ou-Jl4mLU0P5v-oL83aEPbToVuduUxsW6BixBycT1-g" /><input data-drupal-selector="edit-bc-search-fixes-search-block-form" type="hidden" name="form_id" value="bc_search_fixes_search_block_form" /><div data-drupal-selector="edit-actions" class="form-actions form-group js-form-wrapper form-wrapper" id="edit-actions"><button data-drupal-selector="edit-submit" class="button js-form-submit form-submit btn-primary btn icon-only" type="submit" id="edit-submit" name="op" value="Search"><span class="sr-only">Search</span><span class="icon glyphicon glyphicon-search" aria-hidden="true"></span></button></div>

</form>

  </section>

<section id="block-inpagenavigationblock" class="hidden-xs block block-bc-ipnav block-bc-ipnav-block clearfix">
  
      <h2 class="block-title">On This Page</h2>
    

      <div class="bc-ipnav-block"></div>
  </section>


  </div>

          </aside>
              
                  <section class="col-sm-9">

                                      <div class="highlighted">  <div class="region region-highlighted">
    <div data-drupal-messages-fallback class="hidden"></div>

  </div>
</div>
                  
                
                
                
                          <a id="main-content"></a>
            <div class="region region-content">
        <h1 class="page-header"><span>Using Live SSAI with the Native SDKs</span>
</h1>

  
<div class="node node--type-support-doc node--view-mode-full bcdocs-four-rows clearfix">

  

  <div class="group-first-row">
      </div>

  <div class="group-second-row">
  
  <div class="field field--name-field-products field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Product(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--product" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--product"></use>
        </svg>
              <div class="field--item">Video Cloud</div>
          <div class="field--item">Brightcove Player</div>
              </div>
      </div>

  <div class="field field--name-field-roles field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Role(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--roles" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--roles"></use>
        </svg>
              <div class="field--item">Device SDK Developer</div>
              </div>
      </div>

</div>

  
<div class="group-third-row taxonomy__tags">
      <svg class="icon--label" viewBox="0 0 100 100">
      <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--label"></use>
    </svg>
    
  <div class="field field--name-field-tasks field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Task(s)</div>
          <div class="field--items">
              <div class="field--item">Develop with the Native SDKs</div>
              </div>
      </div>

  <div class="field field--name-field-topics field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Topic(s)</div>
          <div class="field--items">
              <div class="field--item">Live Streaming</div>
              </div>
      </div>

  <div class="field field--name-field-sdk field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">SDK</div>
          <div class="field--items">
              <div class="field--item">Android</div>
          <div class="field--item">iOS</div>
              </div>
      </div>

</div>

  <div class="group-fourth-row">
  
            <div class="field field--name-field-support-doc-body field--type-text-with-summary field--label-hidden field--item"><summary>In this topic, you will learn how to play live streams enabled for server-side ad insertion (SSAI) using the Brightcove Native SDKs.</summary><article class="bcls-article"><section class="bcls-section"><h2 id="Overview">Overview</h2>

<p>Server-Side Ad Insertion (<span class="”notranslate”">SSAI</span>) allows you to stitch ads into your video content stream to provide a TV-like viewing experience. To play a live stream with the Native SDKs, you need to pass the playback token with your video request.</p>

<p>Live <span class="”notranslate”">SSAI</span> allows you to:</p>

<ul><li>Insert ads using cue points sent from your encoder or create an instant cue point using the <span class="notranslate">Live API</span></li>
	<li>Ingest "slate" assets to fill any unused ad time</li>
	<li>Avoid ad blockers with ads that are stitched into the live stream on the server side</li>
</ul></section><section class="bcls-section"><h2 id="Steps">Steps</h2>

<p>To play a live stream with <span class="”notranslate”">SSAI</span>, follow these steps:</p>

<ol class="bcls-tasklist__restart"><li><a href="configuring-server-side-ad-settings.html#Creating_a_Live_ad_configuration">Create a live ad configuration</a> using Video Cloud Studio</li>
	<li>Optional: <a href="implementing-server-side-ads-live-module.html#fill_slate">Create slate assets</a>, and/or <a href="live-api-cue-points-and-ad-beacons-ssai.html">Insert cue points and ad beacons</a></li>
	<li><a href="#Create_a_live_event">Create a live event</a></li>
	<li><a href="#Get_the_playback_token">Get the playback token</a></li>
	<li>
	<p>Build your app:</p>

	<ul><li><a href="#Android_implementation">Android implementation</a></li>
		<li><a href="#iOS_implementation">iOS implementation</a></li>
		<!-- <li><a href="#tvOS_implementation">tvOS implementation</a></li> -->
	</ul></li>
	<li><a href="implementing-server-side-ads-live-module.html#request_ad">Request an ad break</a></li>
</ol><aside class="bcls-aside bcls-aside--tip">If you prefer, you can use the Live API to create your stream and configure your ad breaks. For details, see the <a href="live-api-server-side-ad-insertion-ssai.html">Live API: Server-Side Ad Insertion (SSAI)</a> document.</aside></section><section class="bcls-section"><h2 id="Create_a_live_event">Create a live event</h2>

<p>By default, your live stream will use a Brightcove CDN. If you prefer, you can use your own choice of CDN (BYO CDN or "bring your own bandwidth"). To use your own CDN, include the optional step in this section and in the <a href="#Get_the_playback_token">Get the playback token</a> section.</p>

<p>To create a live event, follow these steps:</p>

<ol class="bcls-tasklist__restart"><li>Refer to the <a href="implementing-server-side-ads-live-module.html#create_event">Implementing Server-Side Ads in the Live Module</a> document.</li>
	<li>In the <strong>Advanced Options</strong>, make sure you select <strong>Enable Server-Side Ad Insertion (SSAI)</strong>.</li>
	<li>
	<p><strong>Optional</strong>: To use your own CDN, include these additional steps:</p>

	<ul><li>
		<p>In the <strong>Advanced Options</strong> section, select the <strong>Add multi CDN configuration</strong> option.</p>

		<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Multi CDN Configuration" src="https://learning-services-media.brightcove.com/doc-assets/node/18943-live-ssai-sdks/multiple-cdn.png" /><figcaption class="bcls-caption--image">Multi CDN Configuration</figcaption></figure></li>
		<li>Enter a label and URL for your own CDN. For more information about CDNs, see the <a href="content-delivery-options.html">Content Delivery Options</a> document.</li>
	</ul></li>
</ol></section><section class="bcls-section"><h2 id="Get_the_playback_token">Get the playback token</h2>

<p>When you enable SSAI with your live stream, the player embed code will contain an <code>adConfigId</code> parameter. This value is the playback token, which you will use when requesting video content in your app.</p>

<p>To get the playback token, follow these steps:</p>

<ol class="bcls-tasklist__restart"><li>In Video Cloud Studio, open the <strong>Live</strong> module.</li>
	<li>In the left side navigation, select <strong>Player Configuration</strong>.</li>
	<li>
	<p><strong>Optional</strong>: To use your own CDN, include this additional step. In the <strong>Live Player Options</strong> section, expand the <strong>Select Content Delivery Network (CDN)</strong> dropdown menu and select your preferred CDN.</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Select your CDN" src="https://learning-services-media.brightcove.com/doc-assets/node/18943-live-ssai-sdks/select-cdn.png" /><figcaption class="bcls-caption--image">Select your CDN</figcaption></figure></li>
	<li>
	<p>Copy the <a href="">Standard Embed Code</a> to your clipboard.</p>

	<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Embed code" src="https://learning-services-media.brightcove.com/doc-assets/node/18943-live-ssai-sdks/embed-code.png" /><figcaption class="bcls-caption--image">Embed code</figcaption></figure></li>
	<li>
	<p>From the embed code, copy the <code>VideoId</code> and the <code>adConfigId</code> parameter value. You will use these values in a later step. The <code>adConfigId</code> value is the playback token passed when requesting content from your Video Cloud library. It should look similar to this:</p>

	<pre>
<code class="language-html">live.abcdefghijkl_-Bn1234567890abcde</code></pre>
	</li>
	<li>You will also need the Account Id and Policy Key for your account.</li>
</ol></section><section class="bcls-section"><h2 id="Android_implementation">Android implementation</h2>

<p>To play a live stream, you will include the <code>adConfigId</code> parameter and the value of your playback token to your video request.</p>

<p>Follow these steps to build your app:</p>

<ol class="bcls-tasklist__restart"><li>Use the <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-exoplayer/BasicSsaiSampleApp">Basic SSAI Sample App</a> as a starting point for your code.</li>
	<li>In the <strong>res/values/strings.xml</strong> file, replace the following with your own values
	<ul><li>Account Id</li>
		<li>Video Id</li>
		<li>Policy Key</li>
	</ul></li>
	<li>
	<p>In the <strong>MainActivity.java</strong> file, replace the <code>ad_config_id</code> value with your playback token (live URL) that you you copied from the Live module in the previous section.</p>

	<pre>
<code class="language-java">private final String AD_CONFIG_ID_QUERY_PARAM_VALUE = "live.abcdefghijkl_-Bn1234567890abcde";</code></pre>
	</li>
	<li>
	<p>The <code>ad_config_id</code> with your playback token value is added to the HTTP request as a query parameter.</p>

	<pre class="line-numbers">
<code class="language-java">HttpRequestConfig httpRequestConfig = new HttpRequestConfig.Builder()
  .addQueryParameter(AD_CONFIG_ID_QUERY_PARAM_KEY, AD_CONFIG_ID_QUERY_PARAM_VALUE)
  .build();
</code></pre>
	</li>
	<li>
	<p>Make the catalog call to the Playback API with your live stream video id and the updated HTTP request.</p>

	<pre class="line-numbers">
<code class="language-java">catalog.findVideoByID(getString(R.string.video_id), httpRequestConfig, new VideoListener() {
   @Override
   public void onVideo(Video video) {
       plugin.processVideo(video);
   }
 });
</code></pre>
	</li>
	<li>
	<p>Your app is ready to play the live stream.</p>

	<p>For more details about using live streams enabled for SSAI with the Native SDK for Android, see the <a href="https://www.brightcove.com/en/blog/2019/12/ssai-plugin-changes-690">SSAI Plugin changes in 6.9.0</a> blog post.</p>
	</li>
</ol></section><section class="bcls-section"><h2 id="iOS_implementation">iOS implementation</h2>

<p>To play a live stream, you will include the <code>adConfigId</code> parameter and the value of your playback token to your video request.</p>

<p>Follow these steps to build your app:</p>

<ol class="bcls-tasklist__restart"><li>Use the <a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/SSAI/BasicSSAIPlayer">Basic SSAI Sample App</a> as a starting point for your code.</li>
	<li>In the <strong>ViewController.swift</strong> file, replace the following with your own values
	<ul><li>Account Id</li>
		<li>Video Id</li>
		<li>Policy Key</li>
	</ul></li>
	<li>
	<p>In the <strong>ViewController.swift</strong> file, replace the <code>AdConfigId</code> value with your playback token (live URL) that you you copied from the Live module in the previous section.</p>

	<pre>
<code class="language-swift">static let AdConfigId = "live.abcdefghijkl_-Bn1234567890abcde";</code></pre>
	</li>
	<li>
	<p>The <code>AdConfigId</code> with your playback token value is added to the HTTP request as a query parameter.</p>

	<pre class="line-numbers">
<code class="language-swift">let queryParameters = [kBCOVPlaybackServiceParamaterKeyAdConfigId: Constants.AdConfigId]
</code></pre>
	</li>
	<li>
	<p>Make the catalog call to the Playback API with your live stream video id and the updated HTTP request.</p>

	<pre class="line-numbers">
<code class="language-swift">playbackService.findVideo(withVideoID: Constants.VideoId, parameters: queryParameters) { [weak self] (video: BCOVVideo?, jsonResponse: [AnyHashable: Any]?, error: Error?) -&gt; Void in

   guard let _video = video else {
     print("ViewController Debug - Error retrieving video: \(error?.localizedDescription ?? "unknown error")")
     return
   }

   self?.playbackController?.setVideos([_video] as NSFastEnumeration)
}
</code></pre>
	</li>
	<li>Your app is ready to play the live stream.</li>
</ol></section></article></div>
      
</div>

</div>


<section class="views-element-container block block-views block-views-blockrelated-content-by-field-block-1 clearfix" id="block-views-block-related-content-by-field-block-1">
  
    

      <div class="form-group"><div class="view view-related-content-by-field view-id-related_content_by_field view-display-id-block_1 js-view-dom-id-a0ca7a6adf5e1710cdbb89bf3bfecbd71daea9b05f051e0754ee59e4b304abe1">
  
    
      <div class="view-header">
      <h2>Related content</h2>
    </div>
      
      <div class="view-content">
      <div class="item-list">
  
  <ul>

          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="implementing-server-side-ads-native-player-sdks.html" hreflang="en">Implementing Server-Side Ads with the Native Player SDKs</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="using-player-enhancements-live-ssai-native-sdks.html" hreflang="en">Using Player Enhancements for Live SSAI with the Native SDKs</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="implementing-server-side-ads-live-module.html" hreflang="en">Implementing Server-Side Ads in the Live Module</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="live-api-server-side-ad-insertion-ssai.html" hreflang="en">Live API: Server-Side Ad Insertion (SSAI)</a></span></span></div></li>
    
  </ul>

</div>

    </div>
  
          </div>
</div>

  </section>


  </div>

              </section>

                </div>
  </div>

      
  
  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"node\/18943","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","google_analytics":{"trackOutbound":true,"trackMailto":true,"trackDownload":true,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"},"bootstrap":{"forms_has_error_value_toggle":1,"modal_animation":1,"modal_backdrop":"true","modal_focus_input":1,"modal_keyboard":1,"modal_select_text":1,"modal_show":1,"modal_size":"","popover_enabled":1,"popover_animation":1,"popover_auto_close":1,"popover_container":"body","popover_content":"","popover_delay":"0","popover_html":0,"popover_placement":"right","popover_selector":"","popover_title":"","popover_trigger":"click"},"ajaxTrustedUrl":{"form_action_p_pvdeGsVG5zNF_XLGPTvYSKCf43t8qZYSwcfZl2uzM":true},"user":{"uid":0,"permissionsHash":"3b7fdb4927baca3ee2939edeb777485b3e2c2d36cf8c80e0d8f49c6dc5e2eeca"}}</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

  <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"e78a80aa93","applicationID":"129613202","transactionName":"YwBUZkcFVktUWhJQX1pKd1FBDVdWGn0UTEBVCWpxWhZdZHNWFFRscgpEX3cRUVRRXBQUDkYAWFZQFmhUVFoDUV9YAVNAcwtKVXRaElBfWg==","queueTime":0,"applicationTime":141,"atts":"T0dXEA8fRUU=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>
