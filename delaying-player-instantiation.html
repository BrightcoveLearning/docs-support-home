<!DOCTYPE html>
<html  lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
<script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-2728311-17", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");</script>
<meta name="Generator" content="Drupal 8 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="sites/default/files/favicon-64.png" type="image/png" />
<link rel="alternate" hreflang="en" href="delaying-player-instantiation.html" />
<link rel="canonical" href="delaying-player-instantiation.html" />
<link rel="shortlink" href="delaying-player-instantiation.html" />
<link rel="revision" href="delaying-player-instantiation.html" />

    <title>Delaying Player Instantiation | Brightcove Learning</title>
    <link rel="stylesheet" media="all" href="sites/default/files/css/css_d7PoQ20hWbRiei75VgExP_tm8C1ylIRfzB3zIYLc5Cw_q23msc.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/@unicorn-fail/drupal-bootstrap-styles@0.0.2/dist/3.4.0/8.x-3.x/drupal-bootstrap.min.css" />


    
<!--[if lte IE 8]>
<script src="/sites/default/files/js/js_VtafjXmRvoUgAzqzYTA3Wrjkx9wcWhjP0G4ZnnqRamA.js"></script>
<![endif]-->

    <meta name="uri-translation" content="on" />
    <script>
window['_fs_debug'] = false; window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = 'BX3Q1';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
g.consent=function(a){g("consent",!arguments.length||a)};
g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
g.clearUserCookie=function(){};
})(window,document,window['_fs_namespace'],'script','user');
    </script>
  </head>
  <body class="path-node page-node-type-support-doc has-glyphicons">


<section id="block-gtranslate" class="block block-gtranslate block-gtranslate-block clearfix">
  
    

      



  </section>


  </div>

      </div>
      

                    <div class="navbar-collapse collapse">
            <div class="region region-navigation-collapsible">
    

  </div>

        </div>
          </header>
  
    <div class="full-width-headline">
    <div class="container">
      <div class="row">
        <div class="col-sm-12" role="heading">
            <div class="region region-header">
          <section id="block-brightcoveheadlineblock" class="block block-bc-general block-bc-general-headline-block clearfix">
  
    

      Documentation
  </section>


  </div>

        </div>
      </div>
    </div>
  </div>
  
      <div role="main" class="main-container container  js-quickedit-main-content">
    <div class="row">

                              <aside class="col-sm-3" role="complementary">
              <div class="region region-sidebar-first">
    <section class="bc-search-fixes-search-block-form block block-bc-search-fixes block-bc-search-fixes-search-block clearfix" data-drupal-selector="bc-search-fixes-search-block-form" id="block-brightcovesearchblock">
  
    

      <form action="delaying-player-instantiation.html" method="post" id="bc-search-fixes-search-block-form" accept-charset="UTF-8">
  <div class="form-item js-form-item form-type-textfield js-form-type-textfield form-item-search js-form-item-search form-no-label form-group">
      <label for="edit-search" class="control-label sr-only">Search</label>
  
  
  <input data-drupal-selector="edit-search" class="form-text form-control" type="text" id="edit-search" name="search" value="" size="15" maxlength="128" placeholder="Search" />

  
  
  </div>
<input autocomplete="off" data-drupal-selector="form-5uwksxomv7842asslzqem3b9-rvpnphkysr0-kknpew" type="hidden" name="form_build_id" value="form-5uWKsXomv7842aSSLZQeM3b9-rVpNPHKYsR0_KknpEw" /><input data-drupal-selector="edit-bc-search-fixes-search-block-form" type="hidden" name="form_id" value="bc_search_fixes_search_block_form" /><div data-drupal-selector="edit-actions" class="form-actions form-group js-form-wrapper form-wrapper" id="edit-actions"><button data-drupal-selector="edit-submit" class="button js-form-submit form-submit btn-primary btn icon-only" type="submit" id="edit-submit" name="op" value="Search"><span class="sr-only">Search</span><span class="icon glyphicon glyphicon-search" aria-hidden="true"></span></button></div>

</form>

  </section>

<section id="block-inpagenavigationblock" class="hidden-xs block block-bc-ipnav block-bc-ipnav-block clearfix">
  
      <h2 class="block-title">On This Page</h2>
    

      <div class="bc-ipnav-block"></div>
  </section>


  </div>

          </aside>
              
                  <section class="col-sm-9">

                                      <div class="highlighted">  <div class="region region-highlighted">
    <div data-drupal-messages-fallback class="hidden"></div>

  </div>
</div>
                  
                
                
                
                          <a id="main-content"></a>
            <div class="region region-content">
        <h1 class="page-header"><span>Delaying Player Instantiation</span>
</h1>

  
<div class="node node--type-support-doc node--view-mode-full bcdocs-four-rows clearfix">

  

  <div class="group-first-row">
      </div>

  <div class="group-second-row">
  
  <div class="field field--name-field-products field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Product(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--product" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--product"></use>
        </svg>
              <div class="field--item">Video Cloud</div>
          <div class="field--item">Brightcove Player</div>
              </div>
      </div>

  <div class="field field--name-field-roles field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Role(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--roles" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--roles"></use>
        </svg>
              <div class="field--item">Player Developer</div>
              </div>
      </div>

</div>

  
<div class="group-third-row taxonomy__tags">
      <svg class="icon--label" viewBox="0 0 100 100">
      <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--label"></use>
    </svg>
    
  <div class="field field--name-field-tasks field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Task(s)</div>
          <div class="field--items">
              <div class="field--item">Create &amp; Configure Players</div>
              </div>
      </div>

  <div class="field field--name-field-topics field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Topic(s)</div>
          <div class="field--items">
              <div class="field--item">Playback</div>
              </div>
      </div>

</div>

  <div class="group-fourth-row">
  
            <div class="field field--name-field-support-doc-body field--type-text-with-summary field--label-hidden field--item"><summary>In this topic, you will learn how to delay instantiation of Brightcove Player when an HTML page is browsed. Use cases where this technique is helpful are, for example, lightbox styles and single page web apps where the page with the player is not initially instantiated.</summary>
      <article class="bcls-article"><section class="bcls-section"><h2 id="Delay_instantiation">Delay instantiation</h2>

<p>There are a few use cases where you will want to use the Advanced (in-page embed) player implementation code, but delay player instantiation. To do this, you have to alter the <code>&lt;videos-js&gt;</code> tag's attributes and use the <code>bc()</code> method to initialize the player. Note that the method can take either the player ID or the player element itself as an argument.</p>

<aside class="bcls-aside bcls-aside--information">Note: If you wish to dynamically add the entire player the <a href="brightcove-player-sample-loading-player-dynamically.html">Brightcove Player Sample: Loading the Player Dynamically</a> document has instructions how to do so.</aside></section><section id="Modify_video-js_tag" class="bcls-section"><h2>Modify video-js tag</h2>

<aside class="bcls-aside bcls-aside--information player-only">Note: If you are a Brightcove Player customer, you will not use the <code>data-video-id</code> attribute to assign a video to your player. You would either assign the video in the <strong>Players</strong> module, use curl or the <code>src</code> method (which is used in this document).</aside><p>When delaying player instantiation, you CANNOT use all the <code>&lt;video-js&gt;</code> tag's attributes, or the player will be instantiated. You must remove three of the attributes from the standard Advanced (in-page embed) code. The attributes that need to be removed are:</p>

<ul><li><code>data-account</code></li>
	<li><code>data-player</code></li>
	<li><code>data-video-id</code></li>
</ul><p>This leaves the following attributes in the <code>&lt;video-js&gt;</code> tag:</p>

<ul><li><code>data-embed</code></li>
	<li><code>class</code></li>
	<li><code>controls (optional)</code></li>
</ul><p>The reason the attributes must be removed as any of those three attributes remain it will cause Brightcove Player to be instantiated.</p>

<p>The Advanced code used should be patterned on the following code snippet. Note that an <code>id</code> is added to the tag.</p>

<pre class="line-numbers">
<code class="language-html">&lt;video-js id="myPlayerID"
  data-embed="default"
  class="video-js" controls&gt;&lt;/video-js&gt;

&lt;script src="https://players.brightcove.net/1507807800001/5e28670f-28ce-4ed6-8809-227784965834_default/index.min.js"&gt;&lt;/script&gt;</code></pre>

<p>These changes to the Advanced code and JavaScript code shown below work together to delay the instantiation of the player.</p>
</section><section class="bcls-section"><h2 id="JavaScript_used">JavaScript used</h2>

<p>A very common practice is to use code similar to the following to prepare to programmatically interact with the player:</p>

<pre class="line-numbers">
<code class="language-javascript">videojs.getPlayer('myPlayerID').ready(function() {
  var myPlayer = this;
});</code></pre>

<p>This approach cannot be used as it would instantiate the player. Instead, you will use the <code>bc()</code> method to instantiate the player AFTER other preferences have been set. This <code>bc()</code> method is used to create a new instance of Brightcove Player and is normally automatically called when using the <code>&lt;video-js&gt;</code> tag, unless the steps detailed here are followed.</p>

<div class="video-cloud-only">
<ul><li>Lines 2-3: Declare a variable for the player, and get the <code>video-js</code> element.</li>
	<li>Lines 4-5: Use the JavaScript <code>setAttribute()</code> method to set the <code>data-account</code> and <code>data-player</code>. This is important for tracking analytics and other services.</li>
	<li>Line 6: Uses the JavaScript <code>setAttribute()</code> method to set the video ID.</li>
	<li>Line 9: Uses the <code>bc()</code> method to initialize the player.</li>
	<li>Lines 12-15: Programmatically plays the video. Waiting for the <code>loadedmetadata</code> event to dispatch ensures the video has been retrieved by the catalog before it tries to play.</li>
</ul><pre class="line-numbers">
<code class="language-html">&lt;script type="text/javascript"&gt;
  var myPlayer,
    vTag = document.getElementById('myPlayerID');
  vTag.setAttribute('data-account', 1507807800001);
  vTag.setAttribute('data-player', 'BdGVdOd36');
  vTag.setAttribute('data-video-id', 2114345470001);

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = <span class="bcls-highlight">bc(vTag)</span>;

  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.on('loadedmetadata',function(){
    myPlayer.muted(true);
    myPlayer.play();
  });
&lt;/script&gt;</code></pre>
</div>

<div class="player-only">
<ul><li>Lines 2-3: Declare a variable for the player, and get the <code>video-js</code> element.</li>
	<li>Lines 4-5: Use the JavaScript <code>setAttribute()</code> method to set the <code>data-account</code> and <code>data-player</code>. This is important for tracking analytics and other services.</li>
	<li>Line 8: Uses the <code>bc()</code> method to initialize the player.</li>
	<li>Line 10: Sets the <code>src</code> for the player. It is <strong>very important</strong> to set both the <code>src</code> and <code>type</code> for the source object. Problems can occur in some browsers if the first option in playback technology order does not match the video's type.</li>
	<li>Line 13: Programmatically plays the video. Of course, this is not required.</li>
</ul><pre class="line-numbers">
<code class="language-html">&lt;script type="text/javascript"&gt;
  var myPlayer,
    vTag = document.getElementById('myPlayerID');
  vTag.setAttribute('data-account', 1507807800001);
  vTag.setAttribute('data-player', 'BdGVdOd36');

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = <span class="bcls-highlight">bc(vTag)</span>;

  myPlayer.src({ src: "//solutions.brightcove.com/bcls/assets/videos/Tiger.m3u8", type: "application/x-mpegURL"});
  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.muted(true);
  myPlayer.play();
&lt;/script&gt; </code></pre>
</div>

<aside class="bcls-aside bcls-aside--tip"><p>Alternatively, if you are comfortable addressing elements directly by ID you can use this more concise code:</p>

<pre class="line-numbers">
<code class="language-html">&lt;script type="text/javascript"&gt;
  var myPlayer;
  myPlayerID.setAttribute('data-account', 1507807800001);
  myPlayerID.setAttribute('data-player', 'BdGVdOd36');
  myPlayerID.setAttribute('data-video-id', 2114345470001);

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = bc('myPlayerID');

  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.on('loadedmetadata',function(){
    myPlayer.muted(true);
    myPlayer.play();
  });
&lt;/script&gt;</code></pre>
</aside><h4>No <code>id</code> on the player</h4>

<p>If for some reason you do not wish to use an <code>id</code> with your player, you can use the following code to delay instantiation.</p>

<div class="video-cloud-only">
<ul><li>Lines 3-4: Declare a variable for the player, and get the <code>video-js</code> element.</li>
	<li>Lines 7-8: Use the JavaScript <code>setAttribute()</code> method to set the <code>data-account</code> and <code>data-player</code>. This is important for tracking analytics and other services.</li>
	<li>Line 9: Uses the JavaScript <code>setAttribute()</code> method to set the video ID.</li>
	<li>Line 12: Uses the <code>bc()</code> method to initialize the player.</li>
	<li>Lines 15-18: Programmatically plays the video. Waiting for the <code>loadedmetadata</code> event to dispatch ensures the video has been retrieved by the catalog before it tries to play.</li>
</ul><pre class="line-numbers">
<code class="language-html">&lt;script type="text/javascript"&gt;
  // Retrieve the element by tag name, returns an array so use the zeroth array element
  var myPlayer,
    vTag = document.getElementsByTagName('video-js')[0];

  // Assign the needed attributes
  vTag.setAttribute('data-account', 1507807800001);
  vTag.setAttribute('data-player', 'BdGVdOd36');
  vTag.setAttribute('data-video-id', 2114345470001);

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = bc(vTag);

  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.on('loadedmetadata',function(){
    myPlayer.muted(true);
    myPlayer.play();
  });
&lt;/script&gt;</code></pre>
</div>

<div class="player-only">
<ul><li>Lines 3-4: Declare a variable for the player, and get the <code>video-js</code> element.</li>
	<li>Lines 7-8: Use the JavaScript <code>setAttribute()</code> method to set the <code>data-account</code> and <code>data-player</code>. This is important for tracking analytics and other services.</li>
	<li>Line 11: Uses the <code>bc()</code> method to initialize the player.</li>
	<li>Line 13: Sets the <code>src</code> for the player. It is <strong>very important</strong> to set both the <code>src</code> and <code>type</code> for the source object. Problems can occur in some browsers if the first option in playback technology order does not match the video's type.</li>
	<li>Line 16: Programmatically plays the video. Of course, this is not required.</li>
</ul><pre class="line-numbers">
<code class="language-javascript">&lt;script type="text/javascript"&gt;
  // Retrieve the element by tag name, returns an array so use the zeroth array element
  var myPlayer,
    vTag = document.getElementsByTagName('video-js')[0];

  // Assign the needed attributes
  vTag.setAttribute('data-account', 1507807800001);
  vTag.setAttribute('data-player', 'BdGVdOd36');

  // Use the bc() method to initialize the Brightcove Player
  myPlayer = bc('vTag');

  myPlayer.src({ src: "//solutions.brightcove.com/bcls/assets/videos/Tiger.m3u8", type: "application/x-mpegURL"});
  // Mute (in case there is an audio track, in which case play won't work) and play the video
  myPlayer.muted(true);
  myPlayer.play();
&lt;/script&gt; </code></pre>
</div>
</section><section class="bcls-section"><h2 id="CSAI_with_SSAI_ad_failover">CSAI with SSAI ad failover</h2>

<p>With ad failover turned on, the Brightcove Player detects if an ad blocker is present in the browser. If not, your client-side ads (CSAI) are played. If an ad blocker is detected, then the player automatically requests your server-side ads (SSAI). For details, see the <a href="ssai-ad-block-detection-and-auto-failover.html">SSAI: Ad Block Detection and Auto-Failover</a> document.</p>

<p>By default, calling the <code>bc()</code> method forces the player to initialize immediately. If you want to use ad failover with the <code>bc()</code> method, you need to wait for the player to check if an ad blocker is present. You can do this with the following code:</p>

<pre class="line-numbers">
<code class="language-javascript">bc.usingAdBlocker().then(function() {
  // The promise callback receives a true/false result, which is stored
  // internally, so future bc() calls will use it. There is no need to
  // handle it yourself.
  //
  // You can pass custom arguments to bc, as normal, if needed.
  bc();
});</code></pre>

<h3>Example</h3>

<p>Here is some example code.</p>

<h4>HTML</h4>

<p>This is the HTML for the example.</p>

<pre class="line-numbers">
<code class="language-html">&lt;video-js id="myPlayerID"
	data-embed="default"
	data-application-id
	class="video-js"
	controls
	width="640"
	height="360"&gt;&lt;/video-js&gt;
&lt;script src="//players.brightcove.net/1752604059001/W6RmT8TVL_default/index.min.js"&gt;&lt;/script&gt;</code></pre>

<h4>JavaScript</h4>

<p>This is the JavaScript for the example.</p>

<pre class="line-numbers">
<code class="language-javascript">&lt;script type="text/javascript"&gt;
  // +++ Define the player options +++
  var options = {
    controlBar: {
      volumePanel: {
        inline: false,
        vertical: true
      }
    }
  };

  // +++ Add the player attributes +++
  var myPlayer,
		myPlayerEl = document.getElementById("myPlayerID");
  myPlayerEl.setAttribute('data-account', 1752604059001);
  myPlayerEl.setAttribute('data-player', 'W6RmT8TVL');
  myPlayerEl.setAttribute('data-video-id', 5802784116001);

  // +++ Create the player +++
  bc.usingAdBlocker().then(function() {
    myPlayer = bc(myPlayerEl, options);

    // +++ Optionally, mute and start playback +++
    myPlayer.on('loadedmetadata',function(){
      myPlayer.muted(true);
      myPlayer.play();
    });
  });
&lt;/script&gt;</code></pre>
</section></article></div>
      
</div>

</div>


<section class="views-element-container block block-views block-views-blockrelated-content-by-field-block-1 clearfix" id="block-views-block-related-content-by-field-block-1">
  
    

      <div class="form-group"><div class="view view-related-content-by-field view-id-related_content_by_field view-display-id-block_1 js-view-dom-id-14c034ffd15d4019882b4195f58a2f116d799adc108b2814626c8c620072d9d7">
  
    
      <div class="view-header">
      <h2>Related content</h2>
    </div>
      
      <div class="view-content">
      <div class="item-list">
  
  <ul>

          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="brightcove-player-sample-loading-player-dynamically.html" hreflang="en">Brightcove Player Sample: Loading the Player Dynamically</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="player-events.html" hreflang="en">Player Events</a></span></span></div></li>
    
  </ul>

</div>

    </div>
  
          </div>
</div>

  </section>


  </div>

              </section>

                </div>
  </div>

      
  
  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"node\/18051","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","google_analytics":{"trackOutbound":true,"trackMailto":true,"trackDownload":true,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"},"bootstrap":{"forms_has_error_value_toggle":1,"modal_animation":1,"modal_backdrop":"true","modal_focus_input":1,"modal_keyboard":1,"modal_select_text":1,"modal_show":1,"modal_size":"","popover_enabled":1,"popover_animation":1,"popover_auto_close":1,"popover_container":"body","popover_content":"","popover_delay":"0","popover_html":0,"popover_placement":"right","popover_selector":"","popover_title":"","popover_trigger":"click"},"ajaxTrustedUrl":{"form_action_p_pvdeGsVG5zNF_XLGPTvYSKCf43t8qZYSwcfZl2uzM":true},"user":{"uid":0,"permissionsHash":"3b7fdb4927baca3ee2939edeb777485b3e2c2d36cf8c80e0d8f49c6dc5e2eeca"}}</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

  <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"e78a80aa93","applicationID":"129613202","transactionName":"YwBUZkcFVktUWhJQX1pKd1FBDVdWGn0UTEBVCWpxWhZdZHNWFFRscgpEX3cRUVRRXBQUDkYAWFZQFmhUVFoDUV9YAVNAcwtKVXRaElBfWg==","queueTime":0,"applicationTime":153,"atts":"T0dXEA8fRUU=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>
