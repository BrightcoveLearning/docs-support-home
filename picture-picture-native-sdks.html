<!DOCTYPE html>
<html  lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
<script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create", "UA-2728311-17", {"cookieDomain":"auto"});ga("set", "anonymizeIp", true);ga("send", "pageview");</script>
<meta name="Generator" content="Drupal 8 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="shortcut icon" href="sites/default/files/favicon-64.png" type="image/png" />
<link rel="alternate" hreflang="en" href="picture-picture-native-sdks.html" />
<link rel="canonical" href="picture-picture-native-sdks.html" />
<link rel="shortlink" href="picture-picture-native-sdks.html" />
<link rel="revision" href="picture-picture-native-sdks.html" />

    <title>Picture-in-Picture with the Native SDKs | Brightcove Learning</title>
    <link rel="stylesheet" media="all" href="sites/default/files/css/css_d7PoQ20hWbRiei75VgExP_tm8C1ylIRfzB3zIYLc5Cw_q23msc.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" />
<link rel="stylesheet" media="all" href="https://cdn.jsdelivr.net/npm/@unicorn-fail/drupal-bootstrap-styles@0.0.2/dist/3.4.0/8.x-3.x/drupal-bootstrap.min.css" />


    
<!--[if lte IE 8]>
<script src="/sites/default/files/js/js_VtafjXmRvoUgAzqzYTA3Wrjkx9wcWhjP0G4ZnnqRamA.js"></script>
<![endif]-->

    <meta name="uri-translation" content="on" />
    <script>
window['_fs_debug'] = false; window['_fs_host'] = 'fullstory.com';
window['_fs_org'] = 'BX3Q1';
window['_fs_namespace'] = 'FS';
(function(m,n,e,t,l,o,g,y){
if (e in m) {if(m.console && m.console.log) { m.console.log('FullStory namespace conflict. Please set window["_fs_namespace"].');} return;}
g=m[e]=function(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q=[];
o=n.createElement(t);o.async=1;o.src='https://'+_fs_host+'/s/fs.js';
y=n.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);
g.identify=function(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars=function(v){g(l,v)};
g.shutdown=function(){g("rec",!1)};g.restart=function(){g("rec",!0)};
g.consent=function(a){g("consent",!arguments.length||a)};
g.identifyAccount=function(i,v){o='account';v=v||{};v.acctId=i;g(o,v)};
g.clearUserCookie=function(){};
})(window,document,window['_fs_namespace'],'script','user');
    </script>
  </head>
  <body class="path-node page-node-type-support-doc has-glyphicons">


<section id="block-gtranslate" class="block block-gtranslate block-gtranslate-block clearfix">
  
    

      



  </section>


  </div>

      </div>
      

                    <div class="navbar-collapse collapse">
            <div class="region region-navigation-collapsible">
    

  </div>

        </div>
          </header>
  
    <div class="full-width-headline">
    <div class="container">
      <div class="row">
        <div class="col-sm-12" role="heading">
            <div class="region region-header">
          <section id="block-brightcoveheadlineblock" class="block block-bc-general block-bc-general-headline-block clearfix">
  
    

      Documentation
  </section>


  </div>

        </div>
      </div>
    </div>
  </div>
  
      <div role="main" class="main-container container  js-quickedit-main-content">
    <div class="row">

                              <aside class="col-sm-3" role="complementary">
              <div class="region region-sidebar-first">
    <section class="bc-search-fixes-search-block-form block block-bc-search-fixes block-bc-search-fixes-search-block clearfix" data-drupal-selector="bc-search-fixes-search-block-form" id="block-brightcovesearchblock">
  
    

      <form action="picture-picture-native-sdks.html" method="post" id="bc-search-fixes-search-block-form" accept-charset="UTF-8">
  <div class="form-item js-form-item form-type-textfield js-form-type-textfield form-item-search js-form-item-search form-no-label form-group">
      <label for="edit-search" class="control-label sr-only">Search</label>
  
  
  <input data-drupal-selector="edit-search" class="form-text form-control" type="text" id="edit-search" name="search" value="" size="15" maxlength="128" placeholder="Search" />

  
  
  </div>
<input autocomplete="off" data-drupal-selector="form-tmwl7by7t7xjcel-73rfug2i6o0encymfts0ygkjmno" type="hidden" name="form_build_id" value="form-tMwL7bY7t7xJCEL-73rFug2I6O0enCYmFts0yGKJMNo" /><input data-drupal-selector="edit-bc-search-fixes-search-block-form" type="hidden" name="form_id" value="bc_search_fixes_search_block_form" /><div data-drupal-selector="edit-actions" class="form-actions form-group js-form-wrapper form-wrapper" id="edit-actions"><button data-drupal-selector="edit-submit" class="button js-form-submit form-submit btn-primary btn icon-only" type="submit" id="edit-submit" name="op" value="Search"><span class="sr-only">Search</span><span class="icon glyphicon glyphicon-search" aria-hidden="true"></span></button></div>

</form>

  </section>

<section id="block-inpagenavigationblock" class="hidden-xs block block-bc-ipnav block-bc-ipnav-block clearfix">
  
      <h2 class="block-title">On This Page</h2>
    

      <div class="bc-ipnav-block"></div>
  </section>


  </div>

          </aside>
              
                  <section class="col-sm-9">

                                      <div class="highlighted">  <div class="region region-highlighted">
    <div data-drupal-messages-fallback class="hidden"></div>

  </div>
</div>
                  
                
                
                
                          <a id="main-content"></a>
            <div class="region region-content">
        <h1 class="page-header"><span>Picture-in-Picture with the Native SDKs</span>
</h1>

  
<div class="node node--type-support-doc node--view-mode-full bcdocs-four-rows clearfix">

  

  <div class="group-first-row">
      </div>

  <div class="group-second-row">
  
  <div class="field field--name-field-products field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Product(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--product" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--product"></use>
        </svg>
              <div class="field--item">Video Cloud</div>
          <div class="field--item">Brightcove Player</div>
              </div>
      </div>

  <div class="field field--name-field-roles field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Role(s)</div>
          <div class="field__items taxonomy__tags">
        <svg class="icon--roles" viewBox="0 0 100 100">
          <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--roles"></use>
        </svg>
              <div class="field--item">Device SDK Developer</div>
              </div>
      </div>

</div>

  
<div class="group-third-row taxonomy__tags">
      <svg class="icon--label" viewBox="0 0 100 100">
      <use xlink:href="//support.brightcove.com/themes/custom/bcdocs/images/icons.svg#icon--label"></use>
    </svg>
    
  <div class="field field--name-field-topics field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">Topic(s)</div>
          <div class="field--items">
              <div class="field--item">Playback</div>
              </div>
      </div>

  <div class="field field--name-field-sdk field--type-entity-reference field--label-visually_hidden">
    <div class="field--label sr-only">SDK</div>
          <div class="field--items">
              <div class="field--item">Android</div>
          <div class="field--item">iOS</div>
              </div>
      </div>

</div>

  <div class="group-fourth-row">
  
            <div class="field field--name-field-support-doc-body field--type-text-with-summary field--label-hidden field--item">In this topic, you will learn how to implement Picture-in-Picture mode in your apps using the Brightcove Native Player SDKs.<article class="bcls-article">
<section class="bcls-section">
<h2 id="Overview">Overview</h2>

<p>Picture-in-picture (PIP) mode allows users to multitask on their devices. With this feature, you can create apps where a small video playback window is pinned to a corner of the screen while the user performs other tasks.</p>

<figure class="bcls-figure"><img class="bcls-image--no-border" width="600" alt="Picture-in-picture mode" src="https://learning-services-media.brightcove.com/doc-assets/device-sdks/guides/pip/android-steps.png" />
<figcaption class="bcls-caption--image">Picture-in-picture mode</figcaption>
</figure>
</section>

<section class="bcls-section">
<h2 id="Features">Features</h2>

<p>The picture-in-picture functionality provided by the Brightcove Native SDKs, supports the following features:</p>

<ul>
	<li class="language-editable">Where a user enters picture-in-picture mode by clicking on the PIP icon in the control bar, a developer can enter PIP mode programmatically.</li>
	<li class="language-editable">The user can drag the PIP window around the corners of the screen to place it in the most convenient location.</li>
	<li class="language-editable">The user can pause and play the video in the PIP window, or remove it completely. The user can also maximize the video back to the in-app experience.</li>
	<li class="language-editable">PIP mode works on top of the app, the device background and other applications.</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Supported_versions">Supported versions</h2>

<p>Picture-in-picture mode is supported with the following versions:</p>

<h3>Device OS version</h3>

<ul>
	<li class="language-editable"><strong>Android:</strong> Oreo 8.0+ (API level 26+)</li>
	<li class="language-editable"><strong>iOS:</strong> 10.0+</li>
</ul>

<h3>Native SDK version</h3>

<ul>
	<li class="language-editable"><strong>Android:</strong> Brightcove Native SDK for Android version 6.1.0+</li>
	<li class="language-editable"><strong>iOS:</strong> Brightcove Native SDK for iOS version 6.4.4+</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Android_implementation">Android implementation</h2>

<p>The following topics will help you get started with the picture-in-picture feature:</p>

<ul>
	<li class="language-editable"><a href="#Using_BrightcovePlayer">Using BrightcovePlayer</a></li>
	<li class="language-editable"><a href="#Using_a_regular_Activity">Using a regular Activity</a></li>
	<li class="language-editable"><a href="#Customizing_Picture-in-Picture">Customizing picture-in-picture</a></li>
</ul>

<p>For more details, see Android's <a href="https://developer.android.com/guide/topics/ui/picture-in-picture.html">Picture-in-picture support guide</a>.</p>

<h3 id="Using_BrightcovePlayer">Using BrightcovePlayer</h3>

<p>The easiest way to start using picture-in-picture is to have your activity extend the <code>BrightcovePlayer</code>. To do this, follow these steps:</p>

<ol class="bcls-tasklist">
	<li class="language-editable">In your <strong>styles.xml</strong> file, enable the picture-in-picture button by adding the following code:

	<pre class="line-numbers">
  <code class="language-xml">&lt;style name="BrightcoveControlBar" parent="BrightcoveControlBarDefault"&gt;
         &lt;item name="brightcove_picture_in_picture"&gt;true&lt;/item&gt;
      &lt;/style&gt;</code></pre>
	</li>
	<li class="language-editable">In your <strong>AndroidManifest.xml</strong> file, <a href="https://developer.android.com/guide/topics/ui/picture-in-picture.html#declaring">declare picture-in-picture support</a> for the activity by adding the following:
	<pre class="line-numbers">
  <code class="language-xml">&lt;activity android:name="VideoActivity"
        android:resizeableActivity="true"
      <span class="bcls-highlight">  android:supportsPictureInPicture="true"
        android:configChanges=
            "screenSize|smallestScreenSize|screenLayout|orientation"</span>
        ...
      </code></pre>

	<p>This is an important step. If you do not declare it, when a user presses the picture-in-picture button in the Brightcove Media Controller, an <code>IllegalStateException</code> will be thrown:</p>

	<pre>
  <code class="language-java">java.lang.IllegalStateException: enterPictureInPictureMode: Current activity does not support picture-in-picture</code></pre>
	</li>
</ol>

<p>When going into picture-in-picture mode, the activity itself is resized, retaining all of the activity components in the picture-In-picture window. To avoid this and to provide an easier implementation, the Brightcove video view will go into Full Screen automatically to match the parent layout width and height showing only the video in the picture-in-picture window. Once you leave this mode, Brightcove video view will return to its original state.</p>

<p>If you do not want picture-in-picture in your app, you can disable the picture-in-picture button by adding the following code in your <strong>styles.xml</strong> file:</p>

<pre class="line-numbers">
  <code class="language-xml">&lt;style name="BrightcoveControlBar" parent="BrightcoveControlBarDefault"&gt;
     &lt;item name="brightcove_picture_in_picture"&gt;false&lt;/item&gt;
  &lt;/style&gt;</code></pre>

<h3 id="Using_a_regular_Activity">Using a regular Activity</h3>

<p>If you are using an activity which does not extend <code>BrightcovePlayer</code>, in addition to declaring support for picture-in-picture as mentioned in the previous section, you need to follow a few extra steps:</p>

<ol class="bcls-tasklist__restart">
	<li class="language-editable">Open the <strong>MainActivity.java</strong> file.</li>
	<li class="language-editable">In the <code>onCreate</code> method of the activity, register the Activity with the Brightcove <code>PictureInPictureManager</code>:
	<pre>
  <code class="language-java">PictureInPictureManager.getInstance().registerActivity(Activity, BrightcoveVideoView)</code></pre>
	</li>
	<li class="language-editable">In the <code>onDestroy</code> method, unregister the Activity:
	<pre>
  <code class="language-java">PictureInPictureManager.getInstance().unregisterActivity(Activity)</code></pre>
	</li>
	<li class="language-editable">Override the <code>onPictureInPictureModeChanged</code> Activity method, and call <code>onPictureInPictureModeChanged()</code> method as shown below:
	<pre class="line-numbers">
  <code class="language-java">@Override
  public void onPictureInPictureModeChanged (boolean isInPictureInPictureMode, Configuration newConfig) {
     super.onPictureInPictureModeChanged(isInPictureInPictureMode, newConfig);
     PictureInPictureManager.getInstance().onPictureInPictureModeChanged(isInPictureInPictureMode, newConfig);
  }</code></pre>
	</li>
	<li class="language-editable">Finally, override the <code>onUserLeaveHint()</code> Activity method, and call <code>onUserLeaveHint()</code> as shown below:
	<pre class="line-numbers">
  <code class="language-java">@Override
  public void onUserLeaveHint () {
     super.onUserLeaveHint();
     PictureInPictureManager.getInstance().onUserLeaveHint();
  }</code></pre>
	</li>
</ol>

<p>After following these steps, the picture-in-picture button will appear in the Brightcove Media Controller automatically. You can also trigger picture-in-picture programmatically as follows:</p>

<pre>
  <code class="language-java">PictureInPictureManager.getInstance().enterPictureInPictureMode()</code></pre>

<aside class="bcls-aside bcls-aside--information">Note that calling this method will throw a <code>PictureInPictureManagerException</code> if an Activity has not been registered.</aside>

<h3 id="Customizing_picture-in-picture">Customizing picture-in-picture</h3>

<p>You can customize the behavior and appearance of the picture-in-picture window through the <code>PictureInPictureManager</code>. For example, you can change the aspect ratio of the window or enable/disable captions for your videos.</p>

<p>Android Oreo natively provides three parameters that can be customized:</p>

<ul>
	<li class="language-editable"><a href="https://developer.android.com/reference/android/app/PictureInPictureParams.Builder.html#setAspectRatio(android.util.Rational)">aspect ratio</a>

	<pre>
  <code class="language-java">setAspectRatio(Rational)</code></pre>
	</li>
	<li class="language-editable"><a href="https://developer.android.com/reference/android/app/PictureInPictureParams.Builder.html#setSourceRectHint(android.graphics.Rect)">source bounds hint</a>
	<pre>
  <code class="language-java">setSourceRectHint(Rect)</code></pre>
	</li>
	<li class="language-editable"><a href="https://developer.android.com/reference/android/app/PictureInPictureParams.Builder.html#setActions(java.util.List%3Candroid.app.RemoteAction%3E)">list of remote actions</a>
	<pre>
  <code class="language-java">setUserActions(List&lt;RemoteAction&gt;)</code></pre>
	</li>
</ul>

<h4>User actions</h4>

<p>Brightcove adds a <code>RemoteAction</code> by default, which handles the <code>Play/Pause</code> video events and sets their respective icons. This means that the default <code>RemoteAction</code> will be added to the list of remote actions you set with the following:</p>

<pre>
  <code class="language-java">setUserActions</code></pre>

<p>Keep in mind that you can only set a limited number of actions. To get the <a href="https://developer.android.com/reference/android/app/Activity.html#getMaxNumPictureInPictureActions()">maximum number of actions</a>, call the following:</p>

<pre>
  <code class="language-java">Activity.getMaxNumPictureInPictureActions()</code></pre>

<h4>Closed captions</h4>

<p>You can enable/disable Closed Captions when playing a video in Picture-in-Picture mode by calling the following in the <code>inPictureInPictureManager</code>.</p>

<pre>
  <code class="language-java">setClosedCaptionsEnabled(boolean)</code></pre>

<p>Closed Captions are disabled by default in phones but enabled in tablets. To reduce the size of the Closed Captions while playing in Picture-in-Picture mode, call the following to set a value between <code>0</code> and <code>1.0f</code>.</p>

<pre>
  <code class="language-java">setClosedCaptionsReductionScaleFactor(float)</code></pre>

<p>By default, the Closed Captions size in picture-in-picture mode is <code>0.5f</code> or 50% the original size. Lastly, to enter picture-in-picture mode when the Activity <code>onUserLeaveHint()</code> is called, set the following to <code>true</code>:</p>

<pre>
  <code class="language-java">setOnUserLeaveEnable(boolean)</code></pre>

<h4>Parameters</h4>

<p>In order to retrieve the current picture-in-picture parameters, you can call the following:</p>

<pre>
  <code class="language-java">PictureInPicture.getBrightcovePictureInPictureParams()</code></pre>

<p>This call returns the <code>BrightcovePictureInPictureParams</code> object, which has the getters for all the parameters previously discussed.</p>
</section>

<section class="bcls-section">
<h2 id="iOS_implementation">iOS implementation</h2>

<p>To get started with picture-in-picture, add <code>showPictureInPictureButton</code> to <code>BCOVPUIPlayerViewOptions</code>. When set to true, a picture-in-picture button will be added to the player controls on supported devices.</p>

<p>For more details, see the following:</p>

<ul>
	<li class="language-editable">The <a href="https://github.com/brightcove/brightcove-player-sdk-ios#PIP">Picture in Picture</a> section of the Brightcove Native SDK for iOS reference</li>
	<li class="language-editable">Apple's <a href="https://developer.apple.com/documentation/avkit/adopting_picture_in_picture_in_a_custom_player">Adopting Picture in Picture in a Custom Player</a> document</li>
</ul>

<p>For a code example, see the <a href="https://github.com/BrightcoveOS/ios-player-samples/tree/master/Player/VideoCloudBasicPlayer">Basic Video Playback App</a>.</p>
</section>

<section class="bcls-section">
<h2 id="Limitations">Limitations</h2>

<h3>Android</h3>

<ul>
	<li class="language-editable">Picture-in-picture will only work on devices with Android Oreo or higher</li>
	<li class="language-editable">It is currently not supported for Android TV</li>
	<li class="language-editable">Videos with ads are not supported</li>
	<li class="language-editable">360 videos are not supported</li>
</ul>

<h3>iOS</h3>

<ul>
	<li class="language-editable">Currently, Apple only supports iPad devices</li>
	<li class="language-editable">Videos with ads are not supported</li>
	<li class="language-editable">360 videos are not supported</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Known_issues">Known issues</h2>

<h3>Android</h3>

<ul>
	<li class="language-editable">We found that Widevine-protected videos playing in picture-in-picture mode will turn transparent or black in the Pixel C with Android 8.0. The issue is not reproducible in the same device with Android 8.1.</li>
</ul>
</section>
</article>
</div>
      
</div>

</div>


<section class="views-element-container block block-views block-views-blockrelated-content-by-field-block-1 clearfix" id="block-views-block-related-content-by-field-block-1">
  
    

      <div class="form-group"><div class="view view-related-content-by-field view-id-related_content_by_field view-display-id-block_1 js-view-dom-id-f7d958bfbf6ee021b4bfc5eebc82df5574696b90a8252e145a2531de26b57bd2">
  
    
      <div class="view-header">
      <h2>Related content</h2>
    </div>
      
      <div class="view-content">
      <div class="item-list">
  
  <ul>

          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="overview-brightcove-player-sdk-android.html" hreflang="en">Overview: Brightcove Player SDK for Android</a></span></span></div></li>
          <li><div class="views-field views-field-title"><span class="field-content"><span class="content-type-support_doc"><a href="overview-brightcove-player-sdk-ios.html" hreflang="en">Overview: Brightcove Player SDK for iOS</a></span></span></div></li>
    
  </ul>

</div>

    </div>
  
          </div>
</div>

  </section>


  </div>

              </section>

                </div>
  </div>

      
  
  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","scriptPath":null,"pathPrefix":"","currentPath":"node\/18556","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","google_analytics":{"trackOutbound":true,"trackMailto":true,"trackDownload":true,"trackDownloadExtensions":"7z|aac|arc|arj|asf|asx|avi|bin|csv|doc(x|m)?|dot(x|m)?|exe|flv|gif|gz|gzip|hqx|jar|jpe?g|js|mp(2|3|4|e?g)|mov(ie)?|msi|msp|pdf|phps|png|ppt(x|m)?|pot(x|m)?|pps(x|m)?|ppam|sld(x|m)?|thmx|qtm?|ra(m|r)?|sea|sit|tar|tgz|torrent|txt|wav|wma|wmv|wpd|xls(x|m|b)?|xlt(x|m)|xlam|xml|z|zip"},"bootstrap":{"forms_has_error_value_toggle":1,"modal_animation":1,"modal_backdrop":"true","modal_focus_input":1,"modal_keyboard":1,"modal_select_text":1,"modal_show":1,"modal_size":"","popover_enabled":1,"popover_animation":1,"popover_auto_close":1,"popover_container":"body","popover_content":"","popover_delay":"0","popover_html":0,"popover_placement":"right","popover_selector":"","popover_title":"","popover_trigger":"click"},"ajaxTrustedUrl":{"form_action_p_pvdeGsVG5zNF_XLGPTvYSKCf43t8qZYSwcfZl2uzM":true},"user":{"uid":0,"permissionsHash":"3b7fdb4927baca3ee2939edeb777485b3e2c2d36cf8c80e0d8f49c6dc5e2eeca"}}</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

  <script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"e78a80aa93","applicationID":"129613202","transactionName":"YwBUZkcFVktUWhJQX1pKd1FBDVdWGkkHXlVrBldRXQE=","queueTime":0,"applicationTime":16,"atts":"T0dXEA8fRUU=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>
